{"version":3,"file":"/vagrant/cozy-files/build/client/public/javascripts/app.js","sources":["app/application.coffee","app/collections/files.coffee","app/collections/upload_queue.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/client.coffee","app/lib/folder_helpers.coffee","app/lib/merged_collection.coffee","app/lib/socket.coffee","app/lib/view_collection.coffee","app/locales/en.coffee","app/locales/fr.coffee","app/locales/ro.coffee","app/models/file.coffee","app/router.coffee","app/views/breadcrumbs.coffee","app/views/file.coffee","app/views/files.coffee","app/views/folder.coffee","app/views/modal.coffee","app/views/modal_share.coffee","app/views/public_folder.coffee","app/views/templates/breadcrumbs_element.jade","app/views/templates/file.jade","app/views/templates/file_edit.jade","app/views/templates/file_search.jade","app/views/templates/files.jade","app/views/templates/folder.jade","app/views/templates/modal.jade","app/views/templates/modal_folder.jade","app/views/templates/progressbar.jade","app/views/templates/upload_status.jade","app/views/upload_status.coffee","app/views/uploaded_file_view.coffee","app/widgets/autocomplete.coffee","app/widgets/progressbar.coffee","app/widgets/tags.coffee"],"names":[],"mappings":"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AFJ;WAFsC;QAAA;MAAA,QAA1C,EAbJ;KAPyB;EAAA,CAtB7B;;0BAAA;;GAF4C,WAHhD;;;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhFA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnEA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhFA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5DA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;;ACAA;EAAA;iSAAA;;AAAA,WAAW,QAAQ,kBAAR,CAAX;;AAAA,IACA,GAAO,QAAQ,gBAAR,CADP;;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","sourcesContent":["FileCollection = require './collections/files'\r\nUploadQueue = require './collections/upload_queue'\r\nFile = require './models/file'\r\nSocketListener = require '../lib/socket'\r\nFolderView = require './views/folder'\r\n\r\n###\r\nInitialize the model and start the actual code\r\n###\r\nmodule.exports =\r\n\r\n    initialize: ->\r\n\r\n        # if the application is browsed by a guest or not\r\n        # we use that in various places of the application (as few as possible)\r\n        @isPublic = window.location.pathname.indexOf('/public/') is 0\r\n\r\n        # the base collection holds all the files and folders of the application\r\n        @baseCollection = new FileCollection()\r\n\r\n        # queue to allow new uploads while uploading\r\n        @uploadQueue = new UploadQueue()\r\n\r\n        @socket = new SocketListener()\r\n        @socket.watch @baseCollection\r\n\r\n        Router = require 'router'\r\n        @router = new Router()\r\n\r\n        # Generate the root folder\r\n        # In shared area there are more properties because the root is an actual folder\r\n        if window.rootFolder?\r\n            @root = new File window.rootFolder\r\n            @root.canUpload = window.canUpload or false\r\n            @root.publicNotificationsEnabled = window.publicNofications or false\r\n            @root.publicKey = window.publicKey or \"\"\r\n        else\r\n            # Fake folder to describe the root\r\n            @root = new File\r\n                id: \"root\"\r\n                path: \"\"\r\n                name: t 'root folder name'\r\n                type: \"folder\"\r\n        @baseCollection.add @root\r\n\r\n        # for easy debugging in browser (and dirty tricks)\r\n        window.app = @\r\n\r\n        Backbone.history.start()\r\n\r\n        # Makes this object immuable.\r\n        Object.freeze this if typeof Object.freeze is 'function'\r\n","File = require '../models/file'\r\n\r\n###\r\nRepresents a collection of files\r\nIt acts as the cache when instantiate as the baseCollection\r\nThe base collection holds ALL the files and folders of the application\r\nIt creates projections (subcollection) that will be consumed by folder views.\r\nThose projections represents one folder.\r\n###\r\nmodule.exports = class FileCollection extends Backbone.Collection\r\n\r\n    # Model that will be contained inside the collection.\r\n    model: File\r\n\r\n    # This is where ajax requests the backend.\r\n    url: 'files'\r\n\r\n    cachedPaths: []\r\n\r\n    isPathCached: (path) -> @cachedPaths.indexOf(path) isnt -1\r\n\r\n    ###\r\n        Retrieves folder's information (meta data)\r\n        * from memory if it's cached\r\n        * otherwise, from server\r\n    ###\r\n    getFolderInfo: (folderID, callback) ->\r\n        folder = @get folderID\r\n        unless folder?\r\n            #console.log \"fetch folder info\"\r\n            folder = new File id: folderID, type: \"folder\"\r\n            folder.fetch\r\n                success: =>\r\n                    @add folder\r\n                    callback null, folder\r\n                error: (xhr, resp) ->\r\n                    callback status: resp.status, msg: resp.statusText\r\n        else\r\n            #console.log \"[cache] fetch folder info\"\r\n            callback null, folder\r\n\r\n    # Retrieves folder's content (files and folders in it)\r\n    getFolderContent: (folder, callback = ->) ->\r\n        #console.log \"fetch folder content\"\r\n        path = folder.getRepository()\r\n        folder.fetchContent (err, content, parents) =>\r\n            if err?\r\n                callback err\r\n            else\r\n                # adds the new models (updates them if already in collection)\r\n                @set content, remove: false\r\n\r\n                # we handle deletion manually because\r\n                # they must be based on  projection, not baseCollection\r\n                contentIDs = _.pluck content, 'id'\r\n                path = folder.getRepository()\r\n                itemsToRemove = @getSubCollection(path).filter (item) ->\r\n                    return item.get('id') not in contentIDs\r\n                @remove itemsToRemove\r\n\r\n                # we mark as cached the folder if it's the first time we load\r\n                # its content\r\n                @cachedPaths.push path unless @isPathCached path\r\n                callback()\r\n\r\n    ###\r\n        Global method to retrieve folder's info and content\r\n        and create a subcollection (projection) based on the current collection\r\n    ###\r\n    getByFolder: (folderID, callback) ->\r\n        @getFolderInfo folderID, (err, folder) =>\r\n            if err? then callback err\r\n            else\r\n                path = folder.getRepository()\r\n                filter = (file) ->\r\n                    file.get('path') is path and not file.isRoot()\r\n\r\n                collection = new BackboneProjections.Filtered @,\r\n                                    filter: filter\r\n                                    comparator: @comparator\r\n\r\n                if @isPathCached path\r\n                    #console.log \"[cache] fetch folder content\"\r\n                    callback null, folder, collection\r\n                else\r\n                    # we retrieve at the same time the folder's content\r\n                    # and the folder's breadcrumb\r\n                    @getFolderContent folder, ->\r\n                        callback null, folder, collection\r\n\r\n    existingPaths: ->\r\n        @map (model) -> model.getRepository()\r\n\r\n    # Creates a sub collection (projection) based on the current collection\r\n    getSubCollection: (path) ->\r\n        filter = (file) ->\r\n            return file.get('path') is path and not file.isRoot()\r\n        return new BackboneProjections.Filtered @,\r\n                            filter: filter\r\n                            comparator: @comparator\r\n\r\n    comparator: (f1, f2) ->\r\n\r\n        # default values\r\n        @type = 'name' unless @type?\r\n        @order = 'asc' unless @order?\r\n\r\n        t1 = f1.get 'type'\r\n        t2 = f2.get 'type'\r\n\r\n        # new folders should be at the topmost\r\n        if f1.get('editnew') then return -1\r\n        if f2.get('editnew') then return 1\r\n\r\n        if @type is 'name'\r\n            n1 = f1.get('name').toLocaleLowerCase()\r\n            n2 = f2.get('name').toLocaleLowerCase()\r\n        else if @type is \"lastModification\"\r\n            n1 = new Date(f1.get 'lastModification').getTime()\r\n            n2 = new Date(f2.get 'lastModification').getTime()\r\n        else\r\n            n1 = f1.get @type\r\n            n2 = f2.get @type\r\n\r\n        sort = if @order is 'asc' then -1 else 1\r\n\r\n        if t1 is t2\r\n            if n1 > n2 then return -sort\r\n            else if n1 < n2 then return sort\r\n            else return 0\r\n\r\n        else if t1 is 'file' and t2 is 'folder'\r\n            return 1\r\n        else # t1 is 'folder' and t2 is 'file'\r\n            return -1\r\n","File = require '../models/file'\r\nHelpers = require '../lib/folder_helpers'\r\n\r\n# the uploadQueue is a mix of async.queue & BackoneCollection\r\n# blobs are added to the queue & to the collection\r\n# on upload success, File Models are marked as loaded\r\n# on\r\n\r\nmodule.exports = class UploadQueue extends Backbone.Collection\r\n\r\n    # number of files actually loaded\r\n    loaded: 0\r\n\r\n    initialize: ->\r\n        @asyncQueue = async.queue @uploadWorker, 5\r\n\r\n        # when a model is added, we queue it for upload\r\n        @listenTo this, 'add', (model) =>\r\n            @completed = false\r\n            @asyncQueue.push model\r\n\r\n        @listenTo this, 'remove', (model) =>\r\n            model.error = 'aborted'\r\n\r\n        # when an upload complete, we keep counts\r\n        @listenTo this, 'sync', => @loaded++\r\n\r\n        # proxy progress events, throttled to every 100ms\r\n        @listenTo this, 'progress', _.throttle =>\r\n            @trigger 'upload-progress', @computeProgress()\r\n        , 100\r\n\r\n        # when the queue is totally completed\r\n        @asyncQueue.drain = =>\r\n            @completed = true\r\n            @trigger 'upload-complete'\r\n\r\n    add: ->\r\n        @reset() if @completed\r\n        super\r\n\r\n    reset: (models, options) ->\r\n        @loaded = 0\r\n        @completed = false\r\n        super\r\n\r\n    computeProgress: =>\r\n        return @progress =\r\n            loadedFiles: @loaded\r\n            totalFiles: @length\r\n            loadedBytes: @sumProp 'loaded'\r\n            totalBytes: @sumProp 'total'\r\n\r\n    sumProp: (prop) =>\r\n        iter = (sum, model) -> sum + model[prop]\r\n        @reduce iter, 0\r\n\r\n    uploadWorker: (model, cb) =>\r\n        return cb null if model.existing or model.error or model.isUploaded\r\n        model.save null,\r\n            success: =>\r\n                model.file = null\r\n                model.isUploaded = true\r\n                model.loaded = model.total\r\n                unless app.baseCollection.get model.id\r\n                    app.baseCollection.add model\r\n                cb null\r\n            error: (_, err) =>\r\n                body = try JSON.parse(err.responseText)\r\n                catch e then msg: null\r\n\r\n                if err.status is 400 and body.msg is 'This file already exists'\r\n                    model.existing = true\r\n                    return cb new Error body.msg\r\n\r\n                model.tries = 1 + (model.tries or 0)\r\n                if model.tries > 3\r\n                    model.error = t err.msg or \"modal error file upload\"\r\n                else\r\n                    # let's try again\r\n                    @asyncQueue.push model\r\n                cb err\r\n\r\n    addBlobs: (blobs, folder) ->\r\n\r\n        i = 0\r\n        existingPaths = app.baseCollection.existingPaths()\r\n        # we do a non blocking loop, handling one file every 2ms so the\r\n        # UI don't get stuck\r\n        do nonBlockingLoop = =>\r\n            return unless blob = blobs[i++]\r\n\r\n            path = folder.getRepository() or ''\r\n            relPath = blob.relativePath or\r\n                blob.mozRelativePath or\r\n                blob.webkitRelativePath or\r\n                blob.msRelativePath\r\n\r\n            if relPath then path += '/' + Helpers.dirName relPath\r\n\r\n            # @TODO handle file exists\r\n            model = new File\r\n                type: 'file'\r\n                class: 'document'\r\n                size: blob.size\r\n                name: blob.name\r\n                path: path\r\n                lastModification: blob.lastModifiedDate\r\n\r\n            if model.getRepository() in existingPaths\r\n                model.existing = true\r\n            else\r\n                model.file = blob\r\n                model.loaded = 0\r\n                model.total = blob.size\r\n\r\n            @add model\r\n\r\n            setTimeout nonBlockingLoop, 2\r\n\r\n    addFolderBlobs: (blobs, parent) ->\r\n\r\n        for dir in Helpers.nestedDirs(blobs).reverse()\r\n            prefix = parent.getRepository()\r\n            parts = dir.split('/').filter (x) -> x # ?remove empty last part\r\n            name = parts[parts.length - 1]\r\n            path = [prefix].concat(parts[...-1]).join '/'\r\n\r\n            folder = new File\r\n                type: \"folder\"\r\n                name: name\r\n                path: path\r\n\r\n            # add folder to be saved (top of queue)\r\n            @asyncQueue.unshift folder\r\n\r\n        # Folder will be created, we can safely add files to bottom of queue\r\n        blobs = _.filter blobs, (blob) ->\r\n            blob.name not in ['.', '..']\r\n        @addBlobs blobs, parent\r\n\r\n    filteredByFolder: (folder, comparator) ->\r\n        filteredUploads = new BackboneProjections.Filtered this,\r\n            filter: (file) ->\r\n                return file.get('path') is folder.getRepository() and\r\n                    not file.isUploaded\r\n\r\n            comparator: comparator\r\n\r\n    getResults: ->\r\n        error = []\r\n        existing = []\r\n        success = 0\r\n\r\n        @each (model) ->\r\n            if model.error then error.push model\r\n            else if model.existing then existing.push model\r\n            else success++\r\n\r\n        status = if error.length then 'error'\r\n        else if existing.length then 'warning'\r\n        else 'success'\r\n\r\n        return {status, error, existing, success}\r\n\r\n\r\n\r\n\r\n","app = require 'application'\n\n$ ->\n    jQuery.event.props.push 'dataTransfer'\n\n    locale = window.locale or \"en\" # default locale\n    moment.lang locale\n\n    locales = {}\n    try\n        locales = require \"locales/#{locale}\"\n    catch err\n        locales = require \"locales/en\"\n\n    polyglot = new Polyglot()\n\n    # we give polyglot the data\n    polyglot.extend locales\n\n    # handy shortcut\n    window.t = polyglot.t.bind polyglot\n\n    # launch the app\n    app.initialize()\n","(() ->\n    # IIFE to avoid collisions with other variables\n    (->\n        # Make it safe to do console.log() always.\n        console = window.console = window.console or {}\n        method = undefined\n        dummy = ->\n        methods = ('assert,count,debug,dir,dirxml,error,exception,\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\n                   profile,profileEnd,time,timeEnd,trace,warn').split ','\n\n        console[method] = console[method] or dummy while method = methods.pop()\n    )()\n)()\n","module.exports = class BaseView extends Backbone.View\n\n    template: ->\n\n    initialize: ->\n\n    getRenderData: ->\n        model: @model?.toJSON()\n\n    render: ->\n        @beforeRender()\n        @$el.html @template @getRenderData()\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        #@undelegateEvents()\n        #@$el.removeData().unbind()\n        @remove()\n        #Backbone.View::remove.call @\n","# Make ajax request more easy to do.\nexports.request = (type, url, data, callback) ->\n    $.ajax\n        type: type\n        url: url\n        data: if data? then JSON.stringify data else null\n        contentType: \"application/json\"\n        dataType: \"json\"\n        success: (data) ->\n            callback null, data if callback?\n        error: (data) ->\n            if data.status in [200, 201, 204, 304]\n                callback null, data if callback?\n            else if data? and data.msg? and callback?\n                callback new Error data.msg\n            else if callback?\n                callback new Error \"Server error occured\"\n\n# Sends a get request with data as body\n# Expected callbacks: success and error\nexports.get = (url, callbacks) ->\n    exports.request \"GET\", url, null, callbacks\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callbacks) ->\n    exports.request \"POST\", url, data, callbacks\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callbacks) ->\n    exports.request \"PUT\", url, data, callbacks\n\n# Sends a delete request with data as body\n# Expected callbacks: success and error\nexports.del = (url, callbacks) ->\n    exports.request \"DELETE\", url, null, callbacks\n","module.exports =\n\nremoveTralingSlash: (path) ->\n    if path.slice(-1) is '/'\n        return path.slice(0, -1)\n    return path\n\ndirName: (path) ->\n    return path.split('/')[...-1].join('/')\n\nnestedDirs: (fileList) ->\n    levels = {}\n\n    # make an object with keys paths, values nest level\n    for file in fileList\n        relPath = file.relativePath || file.mozRelativePath || file.webkitRelativePath\n        parent = relPath.slice(0, relPath.lastIndexOf(file.name))\n        nestLevel = parent.split('/').length - 1\n        levels[parent] = nestLevel\n\n    # put them in a list, sorted by nest level\n    dirs = (path: path, nestLevel: levels[path] for path in Object.keys(levels))\n    dirs.sort (a, b) ->\n        return a.nestLevel - b.nestLevel\n\n    return (dir.path for dir in dirs)\n","\r\n# return a collection that behave as a merge of two collection\r\n# if a model is present in both collection (by Id),\r\n# model from collection A is favored\r\n\r\nmodule.exports = MergedCollection = (a, b, uniqAttr='id') ->\r\n\r\n    mixed = new Backbone.Collection [],\r\n        comparator: a.comparator\r\n\r\n    mixed.A = a\r\n    mixed.B = b\r\n\r\n    do reset = () ->\r\n        mixed.reset []\r\n        a.forEach (model) -> mixed.add model\r\n        b.forEach (model) -> mixed.add model unless mixed.get model.id\r\n\r\n    sameAs = (model, collection) ->\r\n        search = {}\r\n        search[uniqAttr] = model.get uniqAttr\r\n        collection.findWhere(search)\r\n\r\n\r\n\r\n    events =\r\n        reset: => reset()\r\n\r\n        remove: (model, collection) =>\r\n            other = if collection is a then b else a\r\n            mixed.remove model\r\n            if model.id and existingOther = sameAs model, other\r\n                mixed.add existingOther\r\n\r\n        add: (model, collection) ->\r\n            if existing = sameAs model, mixed\r\n                if collection is a\r\n                    mixed.remove existing\r\n                    mixed.add model\r\n                else\r\n                    return #do nothing\r\n            else\r\n                mixed.add model\r\n\r\n        'change:id': (model) ->\r\n            dups = mixed.where(id: model.id)\r\n            if dups.length is 2\r\n                toRemove = if dups[0].collection is b then 0 else 1\r\n                mixed.remove dups[toRemove]\r\n\r\n        sort: ->\r\n            mixed.sort()\r\n\r\n    a.bind events\r\n    b.bind events\r\n    return mixed","File = require '../models/file'\r\n\r\nmodule.exports = class SocketListener extends CozySocketListener\r\n\r\n    models:\r\n        'file'   : File\r\n        'folder' : File\r\n\r\n    events: [\r\n        'file.create'\r\n        'file.update'\r\n        'file.delete'\r\n        'folder.create'\r\n        'folder.update'\r\n        'folder.delete'\r\n    ]\r\n\r\n    isInCachedFolder: (model) ->\r\n        path = model.get 'path'\r\n        return @collection.isPathCached path\r\n\r\n    onRemoteCreate: (model) ->\r\n        if @isInCachedFolder model\r\n            # console.info \"remote create\", model\r\n            if not (@collection.get model.get(\"id\"))\r\n                @collection.add model, merge: true\r\n\r\n    onRemoteDelete: (model) ->\r\n        if @isInCachedFolder model\r\n            # console.info \"remote delete\", model\r\n            @collection.remove model\r\n\r\n    onRemoteUpdate: (model, collection) ->\r\n        if @isInCachedFolder model\r\n            # console.info \"remote update\", model\r\n            collection.add model, merge: true\r\n\r\n    process: (event) ->\r\n        {doctype, operation, id} = event\r\n\r\n        #console.info \"received: #{operation}:#{doctype}\"\r\n\r\n        switch operation\r\n            when 'create'\r\n                model = new @models[doctype](id: id, type: doctype)\r\n                model.fetch\r\n                    success: (fetched) =>\r\n                        # set as a folder or a file\r\n                        fetched.set type: doctype\r\n                        @onRemoteCreate fetched\r\n\r\n            when 'update'\r\n                @collections.forEach (collection) =>\r\n                    return unless model = collection.get id\r\n                    model.fetch\r\n                        success: (fetched) =>\r\n                            if fetched.changedAttributes()\r\n                                fetched.set type: doctype\r\n                                @onRemoteUpdate fetched, collection\r\n\r\n            when 'delete'\r\n                @collections.forEach (collection) =>\r\n                    return unless model = collection.get id\r\n                    @onRemoteDelete model, collection\r\n","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n# collectionEl : the DOM element's selector where the itemViews will\n#                be displayed. Automatically falls back to el if null\n\nmodule.exports = class ViewCollection extends BaseView\n\n    collectionEl: null\n    template: -> ''\n    itemview: null\n    views: {}\n    itemViewOptions: ->\n\n    # add 'empty' class to view when there is no subview\n    onChange: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n        @$collectionEl.append view.el\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n\n        @collectionEl = el if not @collectionEl?\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        @$collectionEl = $ @collectionEl\n        @appendView view.$el for id, view of @views\n        @onReset @collection\n        @onChange @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        view.remove() for id, view of @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, model: model, @itemViewOptions(model)\n        view = new @itemview options\n        @views[model.cid] = view.render()\n        @appendView view\n        @onChange @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @views[model.cid].remove()\n        delete @views[model.cid]\n\n        @onChange @views\n","module.exports =\r\n\r\n    # folder view\r\n    \"modal error\"               : \"Error\"\r\n    \"modal ok\"                  : \"OK\"\r\n    \"modal error get files\"     : \"Error getting files from server\"\r\n    \"modal error get folders\"   : \"Error getting folders from server\"\r\n    \"modal error get content\"   : \"An error occurred while retrieving content of folder \\\"%{folderName}\\\" from the server\"\r\n    \"modal error empty name\"    : \"The name can't be empty\"\r\n    \"modal error file invalid\"  : \"doesn't seem to be a valid file\"\r\n\r\n    \"root folder name\"          : \"root\"\r\n\r\n    # breadcrumbs\r\n    \"breadcrumbs search title\"  : \"Search\"\r\n\r\n    # files view\r\n    \"modal error file exists\"   : \"Sorry, a file or folder having this name already exists\"\r\n    \"modal error size\"          : \"Sorry, you haven't enough storage space\"\r\n    \"modal error file upload\"   : \"File could not be sent to server\"\r\n    \"modal error folder create\" : \"Folder could not be created\"\r\n    \"modal error folder exists\" : \"Sorry, a file or folder having this name already exists\"\r\n    \"modal error zip empty folder\" : \"You can't download an empty folder as a ZIP.\"\r\n\r\n    # file view\r\n    \"modal are you sure\"        : \"Are you sure ?\"\r\n    \"modal delete msg\"          : \"Deleting cannot be undone\"\r\n    \"modal delete ok\"           : \"Delete\"\r\n    \"modal cancel\"              : \"cancel\"\r\n    \"modal delete error\"        : \"cancel\"\r\n\r\n    \"modal error in use\"        : \"Name already in use\"\r\n    \"modal error rename\"        : \"Name could not be changed\"\r\n    \"modal error empty name\"    : \"Name can't be empty\"\r\n    \"modal error no data\"       : \"No name and no folder to upload\"\r\n\r\n    \"tag\"                       : \"tag\"\r\n\r\n    # file_edit template\r\n    \"file edit save\"            : \"Save\"\r\n    \"file edit cancel\"          : \"cancel\"\r\n    #tooltip\r\n    \"tooltip delete\"          : \"Delete\"\r\n    \"tooltip edit\"            : \"Rename\"\r\n    \"tooltip download\"        : \"Download\"\r\n    \"tooltip share\"            : \"Share\"\r\n\r\n    # folder template\r\n    'and x files'         : \"\"\"\r\n       and %{smart_count} other file ||||\r\n       and %{smart_count} other files\r\n    \"\"\"\r\n    \"already exists\"      : \"already exists.\"\r\n    \"failed to upload\"    : \"could not be sent to server.\"\r\n    \"upload complete\"     : \"\"\"\r\n        One file successfully uploaded. ||||\r\n        %{smart_count} files successfully uploaded.\r\n    \"\"\"\r\n\r\n    \"upload caption\"            : \"Upload a new file\"\r\n    \"upload msg\"                : \"Drag files or click here to choose files.\"\r\n    \"upload msg selected\"       : \"\"\"\r\n        You have selected %{smart_count} file, click Add to upload it. ||||\r\n        You have selected %{smart_count} files, click Add to upload them.\r\n    \"\"\"\r\n    \"upload close\"              : \"Close\"\r\n\r\n    \"upload send\"               : \"Add\"\r\n    \"upload button\"             : \"Upload a file\"\r\n    \"upload success\"            : \"Upload successfuly completed!\"\r\n    \"upload end button\"         : \"Close\"\r\n    \"total progress\"            : \"Total progress\"\r\n\r\n    \"new folder caption\"        : \"Add a new folder\"\r\n    \"new folder msg\"            : \"Create a folder named:\"\r\n    \"new folder close\"          : \"Close\"\r\n    \"new folder send\"           : \"Create Folder\"\r\n    \"new folder button\"         : \"Create a new folder\"\r\n\r\n    \"drop message\"              : \"Drop your files here to automatically add them\"\r\n\r\n    \"upload folder msg\"         : \"Upload a folder\"\r\n    \"upload folder separator\"   : \"or\"\r\n\r\n    \"folder\"                    : \"Folder\"\r\n    \"image\"                     : \"Image\"\r\n    \"document\"                  : \"Document\"\r\n    \"music\"                     : \"Music\"\r\n    \"video\"                     : \"Video\"\r\n\r\n    \"yes\"                       : \"Yes\"\r\n    \"no\"                        : \"No\"\r\n\r\n    \"name\"                      : \"Name\"\r\n    \"type\"                      : \"Type\"\r\n    \"size\"                      : \"Size\"\r\n    \"date\"                      : \"Last update\"\r\n    \"download\"                  : \"Download\"\r\n    \"MB\"                        : \"MB\"\r\n    \"KB\"                        : \"KB\"\r\n    \"B\"                         : \"B\"\r\n    \"files\"                     : \"files\"\r\n    \"element\"                   : \"%{smart_count} element |||| %{smart_count} elements\"\r\n    \"no file in folder\"         : \"This folder is empty.\"\r\n    \"no file in search\"         : \"Your search did not match any documents.\"\r\n\r\n    \"enable notifications\": \"Enable notifications\"\r\n    \"disable notifications\": \"Disable notifications\"\r\n    \"notifications enabled\": \"Notifications enabled\"\r\n    \"notifications disabled\": \"Notifications disabled\"\r\n\r\n    \"open folder\": \"Open the folder\"\r\n    \"download file\": \"View the file\"\r\n\r\n    # clearance modal\r\n    \"also have access\"                : \"These people also have access, because they have access to a parent folder\"\r\n    \"cancel\"                          : \"Cancel\"\r\n    \"copy paste link\"                 : \"To give access to your contact send him/her the link below:\"\r\n    \"details\"                         : \"Details\"\r\n    \"inherited from\"                  : \"inherited from\"\r\n    \"modal question folder shareable\" : \"Select share mode for this folder\"\r\n    \"modal shared folder custom msg\"  : \"Enter email and press enter\"\r\n    \"modal shared folder link msg\"    : \"Send this link to let people access this folder\"\r\n    \"modal send mails\"                : \"Send a notification\"\r\n    \"modal question file shareable\"   : \"Select share mode for this file\"\r\n    \"modal shared file custom msg\"    : \"Enter email and press enter\"\r\n    \"modal shared file link msg\"      : \"Send this link to let people access this file\"\r\n    \"only you can see\"                : \"Only you and the people listed below can access this resource\"\r\n    \"public\"                          : \"Public\"\r\n    \"private\"                         : \"Private\"\r\n    \"shared\"                          : \"Shared\"\r\n    \"save\"                            : \"Save\"\r\n    \"see link\"                        : \"See link\"\r\n    \"send mails question\"             : \"Send a notification email to:\"\r\n    \"sharing\"                         : \"Sharing\"\r\n    \"revoke\"                          : \"Revoke\"\r\n    \"forced public\"                   : \"This is public because one of the parent folder is public:\"\r\n    \"confirm\"                         : \"Confirm\"\r\n    \"share forgot add\"                : \"\"\"\r\n        Looks like you forgot to click the Add button\r\n    \"\"\"\r\n    \"share confirm save\"              : \"\"\"\r\n        The changes you made to the permissions will not be saved. Is that what you want ?\r\n    \"\"\"\r\n    \"yes forgot\"                      : \"Back\"\r\n    \"no forgot\"                       : \"It's ok\"\r\n    \"perm\"                            : \"can \"\r\n    \"perm r file\"                     : \"download this file\"\r\n    \"perm r folder\"                   : \"browse this folder\"\r\n    \"perm rw folder\"                  : \"browse and upload files\"\r\n    \"change notif\"                    : \"\"\"\r\n        Check this box to be notified when a contact\r\n        add a file to this folder.\"\"\"\r\n    \"send email hint\": \"Notification emails will be sent one time on save\"\r\n\r\n    'move': 'Move'\r\n    'tooltip move': 'Move element to another folder.'\r\n    \"moving...\": 'Moving...'\r\n    'move element to': 'Move element to'\r\n    'error occured canceling move': 'An error occured while canceling move.'\r\n    'error occured while moving element': 'An error occured while moving element'\r\n\r\n    'file successfully moved to': 'File successfully move to'\r\n","module.exports =\r\n\r\n    # folder view\r\n    \"modal error\"               : \"Erreur\"\r\n    \"modal ok\"                  : \"OK\"\r\n    \"modal error get files\"     : \"Une erreur s'est produite en récupérant les fichiers du serveur\"\r\n    \"modal error get folders\"   : \"Une erreur s'est produite en récupérant les dossiers du serveur\"\r\n    \"modal error get content\"   : \"Une erreur s'est produite en récupérant le contenu du dossier \\\"%{folderName}\\\" sur le serveur\"\r\n    \"modal error empty name\"    : \"Le nom ne peut pas être vide\"\r\n    \"modal error file invalid\"  : \"Le fichier ne parait pas être valide\"\r\n\r\n    \"root folder name\"          : \"racine\"\r\n\r\n    # breadcrumbs\r\n    \"breadcrumbs search title\"  : \"Recherche\"\r\n\r\n    # files view\r\n    \"modal error file exists\"   : \"Désolé, un fichier ou un dossier a déjà le même nom\"\r\n    \"modal error size\"          : \"Désolé, vous n'avez pas assez d'espace de stockage\"\r\n    \"modal error file upload\"   : \"Le fichier n'a pas pu être envoyé au serveur\"\r\n    \"modal error folder create\" : \"Le dossier n'a pas pu être créé\"\r\n    \"modal error folder exists\" : \"Désolé, un fichier ou un dossier a déjà le même nom\"\r\n    \"modal error zip empty folder\" : \"Vous ne pouvez pas télécharger un dossier vide en tant que ZIP.\"\r\n\r\n    # file view\r\n    \"modal are you sure\"        : \"Etes-vous sûr ?\"\r\n    \"modal delete msg\"          : \"La suppression ne pourra pas être annulée\"\r\n    \"modal delete ok\"           : \"Supprimer\"\r\n    \"modal cancel\"              : \"Annuler\"\r\n    \"modal delete error\"        : \"Annuler\"\r\n\r\n    \"modal error in use\"        : \"Ce nom est déjà utilisé\"\r\n    \"modal error rename\"        : \"Le nom n'a pas pu être modifié\"\r\n    \"modal error empty name\"    : \"Le nom du dossier ne peut pas être vide\"\r\n\r\n    \"tag\"                       : \"étiquette\"\r\n\r\n    #tooltip\r\n    \"tooltip delete\"          : \"Supprimer\"\r\n    \"tooltip edit\"            : \"Renommer\"\r\n    \"tooltip download\"        : \"Télécharger\"\r\n    \"tooltip share\"            : \"Partager\"\r\n\r\n    # file_edit template\r\n    \"file edit save\"            : \"Sauvegarder\"\r\n    \"file edit cancel\"          : \"Annuler\"\r\n\r\n    # folder template\r\n    \"upload caption\"            : \"Ajouter des fichiers\"\r\n    \"upload msg\"                : \"Glissez des fichiers ou cliquez ici pour sélectionner des fichiers à mettre en ligne.\"\r\n    \"upload msg selected\"       : \"\"\"\r\n        Vous avez sélectionné %{smart_count} fichier, cliquez sur \"Ajouter\" pour les mettre en ligne. ||||\r\n        Vous avez sélectionné %{smart_count} fichiers, cliquez sur \"Ajouter\" pour les mettre en ligne.\r\n    \"\"\"\r\n    \"upload close\"              : \"Annuler\"\r\n    \"upload send\"               : \"Ajouter\"\r\n    \"upload button\"             : \"Ajouter un fichier\"\r\n    \"upload success\"            : \"Ajouté avec succès !\"\r\n    \"upload end button\"         : \"Fermer\"\r\n    \"total progress\"            : \"Progression totale\"\r\n\r\n    \"new folder caption\"        : \"Créer un nouveau dossier\"\r\n    \"new folder msg\"            : \"Entrer le nom du dossier :\"\r\n    \"new folder close\"          : \"Annuler\"\r\n    \"new folder send\"           : \"Créer\"\r\n    \"new folder button\"         : \"Créer un nouveau dossier\"\r\n\r\n    \"drop message\"              : \"Lâchez ici vos fichiers pour les ajouter\"\r\n\r\n    \"upload folder msg\"         : \"Mettre en ligne un dossier\"\r\n    \"upload folder separator\"   : \"ou\"\r\n\r\n    \"folder\"                    : \"Dossier\"\r\n    \"image\"                     : \"Image\"\r\n    \"document\"                  : \"Document\"\r\n    \"music\"                     : \"Musique\"\r\n    \"video\"                     : \"Vidéo\"\r\n\r\n    \"yes\"                       : \"Oui\"\r\n    \"no\"                        : \"Non\"\r\n\r\n    \"name\"                      : \"Nom\"\r\n    \"type\"                      : \"Type\"\r\n    \"size\"                      : \"Taille\"\r\n    \"date\"                      : \"Dernière modification\"\r\n    \"download\"                  : \"Télécharger\"\r\n    \"MB\"                        : \"Mo\"\r\n    \"KB\"                        : \"Ko\"\r\n    \"B\"                         : \"o\"\r\n    \"files\"                     : \"fichiers\"\r\n    \"element\"                   : \"%{smart_count} élément |||| %{smart_count} éléments\"\r\n    \"no file in folder\"         : \"Ce dossier est vide.\"\r\n\r\n    \"enable notifications\": \"Activer les notifications\"\r\n    \"disable notifications\": \"Désactiver les notifications\"\r\n    \"notifications enabled\": \"Notifications activées\"\r\n    \"notifications disabled\": \"Notifications désactivées\"\r\n\r\n    \"open folder\": \"Ouvrir le dossier\"\r\n    \"download file\": \"Consulter le fichier\"\r\n\r\n     # clearance modal\r\n    \"also have access\"                : \"Ces personnes ont égalment accès, car ils ont accès à un dossier parent\"\r\n    \"cancel\"                          : \"Annuler\"\r\n    \"copy paste link\"                 : \"Pour donner accès à votre contact envoyez lui ce lien : \"\r\n    \"details\"                         : \"Details\"\r\n    \"inherited from\"                  : \"hérité de\"\r\n    \"modal question folder shareable\" : \"Choisissez le mode de partage pour ce dossier\"\r\n    \"modal shared folder custom msg\"  : \"Entrez un email et appuyez sur enter\"\r\n    \"modal shared folder link msg\"    : \"Envoyez ce lien pour qu'ils puissent accéder à ce dossier\"\r\n    \"modal question file shareable\"   : \"Choisissez le mode de partage pour ce fichier\"\r\n    \"modal shared file custom msg\"    : \"Entrez un email et appuyez sur enter\"\r\n    \"modal shared file link msg\"      : \"Envoyez ce lien pour qu'ils puissent accéder à ce dossier\"\r\n    \"only you can see\"                : \"Seul vous et les personnes ci-dessous peuvent accéder à cette ressource.\"\r\n    \"public\"                          : \"Public\"\r\n    \"private\"                         : \"Privé\"\r\n    \"shared\"                          : \"Partagé\"\r\n    \"save\"                            : \"Sauvegarder\"\r\n    \"see link\"                        : \"Voir le lien\"\r\n    \"sharing\"                         : \"Partage\"\r\n    \"revoke\"                          : \"Révoquer la permission\"\r\n    \"send mails question\"             : \"Envoyer un email de notification à : \"\r\n    \"modal send mails\"                : \"Envoyer une notification\"\r\n    \"forced public\"                   : \"Ce dossier est public car un parent est public : \"\r\n    \"confirm\"                         : \"Confirmer\"\r\n    \"share forgot add\"                : \"\"\"\r\n        Il semble que vous ayez oublié d'appuyer sur le boutton Add\r\n    \"\"\"\r\n    \"share confirm save\"              : \"\"\"\r\n        Les changements effectués sur les permissions ne seront pas sauvegardés. Etes vous sur ?\r\n    \"\"\"\r\n    \"yes forgot\"                      : \"Retour\"\r\n    \"no forgot\"                       : \"Ok\"\r\n    \"perm\"                            : \"peut \"\r\n    \"perm r file\"                     : \"consulter ce fichier\"\r\n    \"perm r folder\"                   : \"parcourir ce dossier\"\r\n    \"perm rw folder\"                  : \"parcourir ce dossier et ajouter des fichiers\"\r\n    \"change notif\"                    : \"\"\"\r\n        Cocher cette case pour recevoir une notification cozy quand un contact\r\n        ajoute un fichier à ce dossier.\"\"\"\r\n    \"send email hint\": \"Des emails de notification seront envoyés lors de la première sauvegarde.\"\r\n\r\n    \"move\": \"Déplacer\"\r\n    'tooltip move': \"Déplacer l'élément dans un autre dossier.\"\r\n    \"moving...\": \"Déplacement en cours...\"\r\n    \"move element to\": \"Déplacer l'élément vers \"\r\n    \"error occured canceling move\": \"Une erreur est survenue en annulant le déplacement.\"\r\n    \"error occured while moving element\": \"Une erreur est survenue en déplaçant l'élément.\"\r\n    \"file successfully moved to\": 'Fichier déplacé avec succès vers '\r\n\r\n","module.exports =\r\n\r\n    # folder view\r\n    \"modal error\"               : \"Eroare\"\r\n    \"modal ok\"                  : \"OK\"\r\n    \"modal error get files\"     : \"A apărut o eroare în transferul de fișiere de la server\"\r\n    \"modal error get folders\"   : \"A apărut o eroare în transferul de directoare de la server\"\r\n    \"modal error get content\"   : \"An error occurred while retrieving content of folder \\\"%{folderName}\\\" from the server\"\r\n    \"modal error empty name\"    : \"Numele nu poate fi vid\"\r\n    \"modal error file invalid\"  : \"Fișierul nu pare a fi valid\"\r\n\r\n    \"root folder name\"          : \"root\"\r\n\r\n    # breadcrumbs\r\n    \"breadcrumbs search title\"  : \"Căutare\"\r\n\r\n    # files view\r\n    \"modal error file exists\"   : \"Ne pare rău, există deja un document cu acest nume\"\r\n    \"modal error file upload\"   : \"Fișierul nu a putut fi trimis server-ului\"\r\n    \"modal error folder create\" : \"Directorul nu a putut fi creat\"\r\n    \"modal error folder exists\" : \"Ne pare rău, există deja un director cu acest nume\"\r\n    \"modal error zip empty folder\" : \"You can't download an empty folder as a ZIP.\"\r\n\r\n    # file view\r\n    \"modal are you sure\"        : \"Sunteți sigur(ă)?\"\r\n    \"modal delete msg\"          : \"Ștergerea nu poate fi anulată\"\r\n    \"modal delete ok\"           : \"Ștergere\"\r\n    \"modal cancel\"              : \"Anulare\"\r\n    \"modal delete error\"        : \"Anulare\"\r\n\r\n    \"modal error in use\"        : \"Nume deja folosit\"\r\n    \"modal error rename\"        : \"Numele nu a putut fi schimbat\"\r\n    \"modal error empty name\"    : \"Numele nu poate fi vid\"\r\n    \"modal error no data\"       : \"Nu există date de încărcat\"\r\n\r\n    \"tag\"                       : \"etichetă\"\r\n\r\n    # file_edit template\r\n    \"file edit save\"            : \"Salvare\"\r\n    \"file edit cancel\"          : \"Anulare\"\r\n    #tooltip\r\n    \"tooltip delete\"          : \"Ștergere\"\r\n    \"tooltip edit\"            : \"Redenumire\"\r\n    \"tooltip download\"        : \"Descărcare\"\r\n    \"tooltip share\"            : \"Partajare\"\r\n\r\n    # folder template\r\n    \"upload caption\"            : \"Încărcare fișier\"\r\n    \"upload msg\"                : \"Alegeți fișierul de încărcat:\"\r\n    \"upload close\"              : \"Anulare\"\r\n    \"upload send\"               : \"Încărcare\"\r\n\r\n    \"upload button\"             : \"Încărcați un fișier aici\"\r\n\r\n    \"new folder caption\"        : \"Adăugați un nou director\"\r\n    \"new folder msg\"            : \"Creați un director cu numele:\"\r\n    \"new folder close\"          : \"Anulare\"\r\n    \"new folder send\"           : \"OK\"\r\n    \"new folder button\"         : \"Creare director\"\r\n\r\n    \"upload folder msg\"         : \"Încărcați un director\"\r\n\r\n    \"folder\"                    : \"Director\"\r\n    \"image\"                     : \"Imagine\"\r\n    \"document\"                  : \"Document\"\r\n    \"music\"                     : \"Muzică\"\r\n    \"video\"                     : \"Video\"\r\n\r\n    \"yes\"                       : \"Da\"\r\n    \"no\"                        : \"Nu\"\r\n\r\n    \"name\"                      : \"Nume\"\r\n    \"type\"                      : \"Tip\"\r\n    \"size\"                      : \"Dimensiune\"\r\n    \"date\"                      : \"Ultima modificare\"\r\n    \"download\"                  : \"Descărcare\"\r\n    \"MB\"                        : \"Mo\"\r\n    \"KB\"                        : \"Ko\"\r\n    \"B\"                         : \"o\"\r\n\r\n    \"enable notifications\": \"Activare notificări\"\r\n    \"disable notifications\": \"Dezactivare notificări\"\r\n\r\n    \"open folder\": \"Accesare director\"\r\n    \"download file\": \"Descărcare fișier\"\r\n\r\n    # clearance modal\r\n    \"also have access\"                : \"Aceste persoane au acces, deoarece au acces la un director părinte\"\r\n    \"cancel\"                          : \"Anulare\"\r\n    \"copy paste link\"                 : \"Pentru a oferi acces la dvs. de contact trimite el/ea pe link-ul de mai jos: \"\r\n    \"details\"                         : \"Detalii\"\r\n    \"inherited from\"                  : \"moștenit de la\"\r\n    \"modal question folder shareable\" : \"Alegeți modul de partajare pentru acest director\"\r\n    \"modal shared folder custom msg\"  : \"Introduceți adresa de e-mail și apăsați Enter\"\r\n    \"modal shared folder link msg\"    : \"Trimiteți această adresă persoanelor pentru a putea accesa directorul\"\r\n    \"modal send mails\"                : \"Trimiteți o notificare\"\r\n    \"modal question file shareable\"   : \"Alegeți modul de partajare pentru acest document\"\r\n    \"modal shared file custom msg\"    : \"Introduceți adresa de e-mail și apăsați Enter\"\r\n    \"modal shared file link msg\"      : \"Trimiteți această adresă persoanelor pentru a putea accesa directorul\"\r\n    \"only you can see\"                : \"Numai Dvs. și persoanele de mai jos au acces\"\r\n    \"public\"                          : \"Public\"\r\n    \"private\"                         : \"Privat\"\r\n    \"shared\"                          : \"Partajat\"\r\n    \"save\"                            : \"Salvare\"\r\n    \"see link\"                        : \"Vedeți adresă\"\r\n    \"send mails question\"             : \"Trimiteți e-mail de notificare la: \"\r\n    \"sharing\"                         : \"Partajare\"\r\n    \"revoke\"                          : \"Revocare permisiune\"\r\n    \"forced public\"                   : \"Acesta este public deoarece un director părinte este public: \"\r\n    \"perm\"                            : \"poate \"\r\n    \"perm r file\"                     : \"descărca acest fișier\"\r\n    \"perm r folder\"                   : \"parcurge acest dosar \"\r\n    \"perm rw folder\"                  : \"parcurge acest dosar și încărca fișiere\"\r\n    \"change notif\"                    : \"\"\"Bifați această casetă pentru a fi notificat atunci când o persoană de contact\r\n         adăuga un fișier în acest dosar.\r\n    \"\"\"\r\n    \"send email hint\": \"Notification emails will be sent one time on save\"\r\n","client = require '../lib/client'\r\n\r\nmodule.exports = class File extends Backbone.Model\r\n\r\n    # The breadcrumb is an array of vanilla JS objects\r\n    # representing a parent folder.\r\n    breadcrumb: []\r\n\r\n    constructor: (options) ->\r\n        doctype = options.docType?.toLowerCase()\r\n        if doctype?\r\n            options.type = if doctype is 'file' then 'file' else 'folder'\r\n        super options\r\n\r\n\r\n    # helpers\r\n    isFolder: -> return @get('type') is 'folder'\r\n    isFile: -> return @get('type') is 'file'\r\n    isSearch: -> return @get('type') is 'search'\r\n    isRoot: -> return @get('id') is 'root'\r\n\r\n    parse: (data) ->\r\n        delete data.success\r\n        return data\r\n\r\n    # the repository is the model's full path (name included in the path)\r\n    getRepository: -> return if @isRoot() then \"\" else \"#{@get(\"path\")}/#{@get(\"name\")}\"\r\n\r\n    # Overrides sync method to allow file upload (multipart request)\r\n    # and progress events\r\n    sync: (method, model, options)->\r\n\r\n        # this is a new model, let's upload it as a multipart\r\n        if model.file\r\n            formdata = new FormData()\r\n            formdata.append 'name', model.get 'name'\r\n            formdata.append 'path', model.get 'path'\r\n            formdata.append 'file', model.file\r\n            formdata.append 'lastModification', model.get 'lastModification'\r\n\r\n            # trigger upload progress on the model\r\n            progress = (e) ->\r\n                model.loaded = e.loaded\r\n                model.trigger 'progress', e\r\n\r\n            _.extend options,\r\n                contentType: false\r\n                data: formdata\r\n                # patch Model.sync so it could trigger progress event\r\n                xhr: ->\r\n                    xhr = $.ajaxSettings.xhr()\r\n                    if xhr.upload\r\n                        xhr.upload.addEventListener 'progress', progress, false\r\n                    xhr\r\n\r\n        Backbone.sync.apply @, arguments\r\n\r\n    urlRoot: ->\r\n        prefix = if app.isPublic then '../' else ''\r\n\r\n        if @isFolder()\r\n            prefix + 'folders/'\r\n        else if @isSearch()\r\n            prefix + 'search/'\r\n        else\r\n            prefix + 'files/'\r\n\r\n    # Overrides the url method to append the key if it's public mode\r\n    url: (toAppend = '') ->\r\n        url = super()\r\n        key = if app.isPublic then window.location.search else ''\r\n\r\n        return url + toAppend + key\r\n\r\n    getPublicURL: (key) ->\r\n        if @isFile()\r\n            \"#{window.location.origin}/public/files/#{@urlRoot()}#{@id}/attach/#{@get 'name'}\"\r\n        else\r\n            \"#{window.location.origin}/public/files/#{@urlRoot()}#{@id}\"\r\n\r\n    # Only relevant if model is a folder\r\n    getZipURL: ->\r\n        if @isFolder()\r\n            toAppend = \".zip\"\r\n            @url toAppend\r\n\r\n    # Only relevant if model is a file\r\n    getAttachmentUrl: ->\r\n        if @isFile()\r\n            toAppend = \"/attach/#{@get 'name'}\"\r\n            @url toAppend\r\n\r\n    getDownloadUrl: ->\r\n        if @isFile()\r\n            toAppend = \"/download/#{@get 'name'}\"\r\n            @url toAppend\r\n        else if @isFolder()\r\n            @getZipURL()\r\n\r\n    validate: ->\r\n        errors = []\r\n        if not @get(\"name\") or @get(\"name\") is \"\"\r\n            errors.push\r\n                field: 'name'\r\n                value: \"A name must be set.\"\r\n\r\n        if errors.length > 0\r\n            return errors\r\n        return\r\n\r\n    prepareCallbacks: (callbacks, presuccess, preerror) ->\r\n        {success, error} = callbacks or {}\r\n        presuccess ?= (data) => @set data.app\r\n        @trigger 'request', @, null, callbacks\r\n        callbacks.success = (data) =>\r\n            presuccess data if presuccess\r\n            @trigger 'sync', @, null, callbacks\r\n            success data if success\r\n        callbacks.error = (jqXHR) =>\r\n            preerror jqXHR if preerror\r\n            @trigger 'error', @, jqXHR, {}\r\n            error jqXHR if error\r\n\r\n    ###\r\n        ONLY RELEVANT IF IT'S A FOLDER\r\n        Fetches content (folders and files) for the current folder\r\n        the request also responds with the breadcrumb\r\n    ###\r\n    fetchContent: (callbacks) ->\r\n        @prepareCallbacks callbacks\r\n\r\n        url = \"#{@urlRoot()}content\"\r\n        key = window.location.search # relevant if shared mode\r\n        if app.isPublic and not @isSearch()\r\n            url = \"#{@urlRoot()}#{@id}/content#{key}\"\r\n        else if @isSearch()\r\n            url += key\r\n\r\n        client.post url, id: @id, (err, body) =>\r\n            if err?\r\n                @setBreadcrumb []\r\n                callbacks err\r\n            else\r\n                if body.parents?\r\n                    {content, parents} = body\r\n                else\r\n                    # during search or for root, there is not parents\r\n                    content = body\r\n                    parents = []\r\n                @setBreadcrumb parents or []\r\n                callbacks null, content, parents\r\n\r\n    # Set the breadcrumb attribute and append the root model to it\r\n    # If the folder is a search query, the breadcrumb is the query\r\n    setBreadcrumb: (parents) ->\r\n        if @get('type') is 'search'\r\n            @breadcrumb = [window.app.root.toJSON(), @toJSON()]\r\n        else\r\n            parents.unshift window.app.root.toJSON()\r\n            @breadcrumb = parents\r\n","app = require 'application'\r\nFile = require './models/file'\r\nFileCollection = require './collections/files'\r\nMergedCollection = require './lib/merged_collection'\r\nFolderView = require './views/folder'\r\nPublicFolderView = require './views/public_folder'\r\n\r\n###\r\nBinds routes to code actions.\r\nThis is also used as a controller to initialize views and perform data fetching\r\n###\r\nmodule.exports = class Router extends Backbone.Router\r\n\r\n    folderView: null\r\n\r\n    routes:\r\n        '': 'main'\r\n        'folders/:folderid' : 'folder'\r\n        'search/:query' : 'search'\r\n\r\n    main: ->\r\n        rootID = app.root.get 'id'\r\n        @_loadFolderView rootID\r\n\r\n    folder: (id) -> @_loadFolderView id\r\n\r\n    search: (query) ->\r\n        folder = new File\r\n                id: query\r\n                type: \"search\"\r\n                name: \"#{t('breadcrumbs search title')} '#{query}'\"\r\n\r\n        folder.fetchContent (err, content) =>\r\n            collection = new FileCollection content\r\n\r\n            # we don't re-render the view to prevent the search field\r\n            # from being reset\r\n            if @folderView?\r\n                @folderView.updateSearch folder, collection\r\n            else\r\n                @_renderFolderView folder, collection, query\r\n\r\n    # get the data and render the view\r\n    _loadFolderView: (folderID) ->\r\n        # add the spinner during folder change\r\n        @folderView.spin() if @folderView?\r\n\r\n        # retrieve folder info and content from data source or cache\r\n        app.baseCollection.getByFolder folderID, (err, folder, collection) =>\r\n            if err? then console.log err\r\n            else\r\n                @_renderFolderView folder, collection\r\n\r\n    # process the actual render\r\n    _renderFolderView: (folder, collection, query = '') ->\r\n        if @folderView?\r\n            @folderView.destroy()\r\n            # because destroying the view also removes the element\r\n            $('html').append $ '<body></body>'\r\n\r\n        # we generate a mixed collection with content & uploads\r\n        filteredUploads = app.uploadQueue.filteredByFolder folder, collection.comparator\r\n        mergedCollection = MergedCollection(collection, filteredUploads, 'name')\r\n\r\n        @folderView = @_getFolderView\r\n            model: folder\r\n            collection: mergedCollection\r\n            baseCollection: app.baseCollection\r\n            breadcrumbs: app.breadcrumbs\r\n            uploadQueue: app.uploadQueue\r\n            query: query\r\n        @folderView.render()\r\n\r\n    # factory to get the proper folder object based on mode (shared or not)\r\n    _getFolderView: (params) ->\r\n        if app.isPublic\r\n            return new PublicFolderView _.extend params, rootFolder: app.root\r\n        else\r\n            return new FolderView params\r\n\r\n","BaseView = require '../lib/base_view'\r\n\r\nmodule.exports = class BreadcrumbsView extends BaseView\r\n\r\n    itemview: require './templates/breadcrumbs_element'\r\n    tagName: \"ul\"\r\n\r\n    # collection is a simple array, not a backbone collection\r\n    render: ->\r\n        # temporary trick to prevent public area\r\n        # to display the root (shared folder) twice in shared mode\r\n        @collection.shift() unless @collection[0].id is 'root'\r\n\r\n        opacity = if @collection.length is 1 then '0.5' else '1'\r\n        @$el.css 'opacity', opacity\r\n\r\n        @$el.empty()\r\n        for folder in @collection\r\n            @$el.append @itemview model: folder\r\n        @\r\n\r\n","BaseView = require '../lib/base_view'\r\nModalView = require \"./modal\"\r\nModalShareView = null\r\nTagsView = require \"../widgets/tags\"\r\nProgressBar = require '../widgets/progressbar'\r\n\r\nclient = require \"../lib/client\"\r\n\r\nmodule.exports = class FileView extends BaseView\r\n\r\n    className      : 'folder-row'\r\n    tagName        : 'tr'\r\n    templateNormal : require './templates/file'\r\n    templateEdit   : require './templates/file_edit'\r\n    templateSearch : require './templates/file_search'\r\n\r\n    events:\r\n        'click a.file-delete'      : 'onDeleteClicked'\r\n        'click a.file-share'       : 'onShare'\r\n        'click a.file-edit'        : 'onEditClicked'\r\n        'click a.file-edit-save'   : 'onSaveClicked'\r\n        'click a.file-edit-cancel' : 'onCancelClicked'\r\n        'click a.file-move'        : 'onMoveClicked'\r\n        'keydown input.file-edit-name'  : 'onKeyPress'\r\n\r\n    template: (args) ->\r\n        if @isSearchMode\r\n            @templateSearch args\r\n        else\r\n            @templateNormal args\r\n\r\n    getRenderData: ->\r\n        _.extend super(),\r\n            attachmentUrl: @model.getAttachmentUrl()\r\n            downloadUrl: @model.getDownloadUrl()\r\n\r\n    initialize: (options) ->\r\n        @isSearchMode = options.isSearchMode\r\n        @listenTo @model, 'change', @render\r\n\r\n        # prevent contacts loading in shared area\r\n        unless app.isPublic\r\n            ModalShareView ?= require \"./modal_share\"\r\n\r\n    render: ->\r\n        return if _.isEqual Object.keys(@model.changed), ['tags']\r\n        return super\r\n\r\n    onDeleteClicked: ->\r\n        new ModalView t(\"modal are you sure\"), t(\"modal delete msg\"), t(\"modal delete ok\"), t(\"modal cancel\"), (confirm) =>\r\n            if confirm\r\n                @model.destroy\r\n                    error: ->\r\n                        ModalView.error t(\"modal delete error\")\r\n\r\n    onEditClicked: ->\r\n        width = @$(\".caption\").width() + 10\r\n        model = @model.toJSON()\r\n        model.class = 'folder' unless model.class?\r\n        @$el.html @templateEdit model: model\r\n        @tags = new TagsView\r\n            el: @$ '.tags'\r\n            model: @model\r\n        @tags.render()\r\n        @$(\".file-edit-name\").width width\r\n        @$(\".file-edit-name\").focus()\r\n\r\n        # we only want to select the part before the file extension\r\n        lastIndexOfDot = model.name.lastIndexOf '.'\r\n        lastIndexOfDot = model.name.length if lastIndexOfDot is -1\r\n        input = @$(\".file-edit-name\")[0]\r\n        if typeof input.selectionStart isnt \"undefined\"\r\n            input.selectionStart = 0\r\n            input.selectionEnd = lastIndexOfDot\r\n        else if document.selection && document.selection.createRange\r\n            # IE Branch...\r\n            input.select()\r\n            range = document.selection.createRange()\r\n            range.collapse true\r\n            range.moveEnd \"character\", lastIndexOfDot\r\n            range.moveStart \"character\", 0\r\n            range.select()\r\n\r\n    onShare: -> new ModalShareView model: @model\r\n\r\n    onSaveClicked: ->\r\n        name = @$('.file-edit-name').val()\r\n\r\n        if name and name isnt \"\"\r\n            @model.save name: name,\r\n                success: (data) =>\r\n                    @render()\r\n                error: (model, err) =>\r\n                    if err.status is 400\r\n                        ModalView.error t(\"modal error in use\")\r\n                    else\r\n                        ModalView.error t(\"modal error rename\")\r\n        else\r\n            ModalView.error t(\"modal error empty name\")\r\n\r\n    onCancelClicked: ->\r\n        if @model.isNew() then @model.destroy()\r\n        else @render()\r\n\r\n\r\n\r\n    # Display Move widget and handle move operation if user confirms.\r\n    onMoveClicked: =>\r\n        formTemplate = \"\"\"\r\n            <div class=\"move-widget\">\r\n            <span> #{t 'move element to'}: </span>\r\n            <select class=\"move-select\"></select>\r\n            <button class=\"button btn move-btn\">\r\n                #{t 'move'}\r\n            </button>\r\n            <button class=\"btn btn-link cancel-move-btn\">\r\n                #{t 'cancel'}\r\n            </button>\r\n            </div>\r\n        \"\"\"\r\n\r\n        errorTemplate = \"\"\"\r\n            <div>\r\n                <span class=\"error\">\r\n                #{'error occured while moving element'}: #{@model.get 'name'}.\r\n                #</span>\r\n            </div>\r\n        \"\"\"\r\n\r\n        movedTemplate = (path) ->\r\n            \"\"\"\r\n            <div id=\"moved-infos\">\r\n            <span>#{ t 'file successfully moved to'}: /#{path}.</span>\r\n            <button class=\"btn btn-link cancel-move-btn\">\r\n                #{t 'cancel'}\r\n            </button>\r\n            </div>\r\n        \"\"\"\r\n\r\n        optionTemplate =  (path) -> \"\"\"\r\n            <option value=\"#{path}\">#{path}</option>\r\n        \"\"\"\r\n\r\n        firstCell = @$el.find('td:first-child')\r\n\r\n        client.get 'folders/list', (err, paths) =>\r\n            if err\r\n                alert err\r\n            else\r\n                parentPath = @model.get('path')\r\n                fullPath =  @model.get('path') + \"/\" + @model.get('name')\r\n                type = @model.get 'type'\r\n\r\n                # Add root folder to list.\r\n                paths.push '/' if parentPath isnt  \"\"\r\n\r\n\r\n                # Fill folder combobox with folder list.\r\n                moveForm = $ formTemplate\r\n                for path in paths\r\n                    if path isnt parentPath \\\r\n                       and not(type is 'folder' and path.indexOf(fullPath) is 0)\r\n                        moveForm.find('select').append optionTemplate path\r\n\r\n                # Cancel move action on cancel clicked.\r\n                cancelButton =  moveForm.find(\".cancel-move-btn\")\r\n                cancelButton.click ->\r\n                    moveForm.remove()\r\n\r\n                # Perform move operation on move clicked.\r\n                moveButton = moveForm.find(\".move-btn\")\r\n                moveButton.click =>\r\n\r\n                    # Show loading\r\n                    moveButton.html t \"moving...\"\r\n\r\n                    # Get path and url information.\r\n                    path = $(\".move-select\").val().substring 1\r\n                    id = @model.get 'id'\r\n                    previousPath = @model.get 'path'\r\n\r\n                    # Stop render sync.\r\n                    @stopListening @model\r\n                    window.app.socket.pause @model, null,\r\n                        ignoreMySocketNotification: true\r\n\r\n                    showMoveResult = =>\r\n                        moveForm.fadeOut()\r\n                        moveForm.remove()\r\n                        movedInfos = $ movedTemplate path\r\n                        firstCell.append movedInfos\r\n                        cancelButton =  movedInfos.find(\".cancel-move-btn\")\r\n                        movedInfos.click =>\r\n                            data = path: previousPath\r\n                            client.put \"#{type}s/#{id}\", data, (err) =>\r\n                                if err\r\n                                    ModalView.error t 'error occured canceling move'\r\n                                else\r\n                                    movedInfos.fadeOut()\r\n\r\n                    # Can't use Backbone model due to a weird sync\r\n                    # I can't figure out what is causing view to re-render.\r\n                    client.put \"#{type}s/#{id}\", path: path, (err) =>\r\n                        if err\r\n                            firstCell.append errorTemplate\r\n                        else\r\n                            showMoveResult()\r\n\r\n                        # Put back synchronization.\r\n                        window.app.socket.resume @model, null,\r\n                            ignoreMySocketNotification: true\r\n                        @listenTo @model, 'change', @render\r\n\r\n                @$el.find('td:first-child').append moveForm\r\n\r\n\r\n\r\n    onKeyPress: (e) =>\r\n        if e.keyCode is 13\r\n            @onSaveClicked()\r\n        else if e.keyCode is 27\r\n            @render()\r\n\r\n    afterRender: ->\r\n        # if it's an upload\r\n        if @model.file\r\n            @$('.type-column-cell').remove()\r\n            @$('.date-column-cell').remove()\r\n            @progressbar = new ProgressBar(model: @model)\r\n            cell = $('<td colspan=\"2\"></td>')\r\n            cell.append @progressbar.render().$el\r\n            @$('.size-column-cell').after cell\r\n        else\r\n            @tags = new TagsView\r\n                el: @$('.tags')\r\n                model: @model\r\n            @tags.render()\r\n","ViewCollection = require '../lib/view_collection'\r\nFileView = require './file'\r\n\r\nmodule.exports = class FilesView extends ViewCollection\r\n    template: require './templates/files'\r\n    el: '#files'\r\n\r\n    itemview: FileView\r\n    collectionEl: '#table-items-body'\r\n\r\n    events:\r\n        'click #up-name'               : 'onChangeOrder'\r\n        'click #down-name'             : 'onChangeOrder'\r\n        'click #up-class'              : 'onChangeOrder'\r\n        'click #down-class'            : 'onChangeOrder'\r\n        'click #up-size'               : 'onChangeOrder'\r\n        'click #down-size'             : 'onChangeOrder'\r\n        'click #up-lastModification'   : 'onChangeOrder'\r\n        'click #down-lastModification' : 'onChangeOrder'\r\n\r\n    initialize: (options) ->\r\n        super options\r\n\r\n        @itemViewOptions = -> isSearchMode: options.isSearchMode\r\n        @chevron = order: @collection.order, type: @collection.type\r\n\r\n        @listenTo @collection, \"add\", @render\r\n        @listenTo @collection, \"remove\", @render\r\n        @listenTo @collection, \"sort\", @render\r\n        @listenTo @collection, \"reset\", @render\r\n\r\n    afterRender: ->\r\n        super()\r\n        @displayChevron @chevron.order, @chevron.type\r\n        @updateNbFiles()\r\n\r\n    updateNbFiles: ->\r\n        nbElements = @collection.length\r\n\r\n        if nbElements > 0\r\n            @$(\"#file-amount-indicator\").html t 'element',\r\n                                                smart_count: nbElements\r\n            @$(\"#file-amount-indicator\").show()\r\n            @$(\"#no-files-indicator\").hide()\r\n        else\r\n            @$(\"#file-amount-indicator\").hide()\r\n            @$(\"#no-files-indicator\").show()\r\n\r\n    # Helpers to display correct chevron to sort files\r\n    displayChevron: (order, type) ->\r\n\r\n        if order is \"asc\"\r\n            @$(\"#up-#{type}\").show()\r\n            @$(\"#down-#{type}\").hide()\r\n            @$(\"#up-#{type}\").removeClass 'unactive'\r\n        else\r\n            @$(\"#up-#{type}\").hide()\r\n            @$(\"#down-#{type}\").show()\r\n            @$(\"#down-#{type}\").removeClass 'unactive'\r\n\r\n\r\n    # Changer sorting depending on the clicked chevron.\r\n    onChangeOrder: (event) ->\r\n        infos = event.target.id.split '-'\r\n        order = infos[0]\r\n        type = infos[1]\r\n\r\n        order = if order is 'up' then 'desc' else 'asc'\r\n\r\n        @chevron = order: order, type: type\r\n        @collection.order = order\r\n        @collection.type = type\r\n        @collection.sort()\r\n","BaseView = require '../lib/base_view'\r\nFilesView = require './files'\r\nBreadcrumbsView = require \"./breadcrumbs\"\r\nUploadStatusView = require './upload_status'\r\nModal = require './modal'\r\nModalShareView = null\r\n\r\nFile = require '../models/file'\r\n\r\n###\r\nHandles the display logic for a folder.\r\nMain entry point of the interface: handles breadcrumb, buttons and files list\r\n###\r\nmodule.exports = class FolderView extends BaseView\r\n\r\n    el: 'body'\r\n\r\n    template: require './templates/folder'\r\n\r\n    events: ->\r\n        'click #button-new-folder'     : 'onNewFolderClicked'\r\n        # 'click #button-upload-new-file': 'onUploadNewFileClicked'\r\n        'click #new-folder-send'       : 'onAddFolder'\r\n        'click #cancel-new-folder'     : 'onCancelFolder'\r\n        'click #cancel-new-file'       : 'onCancelFile'\r\n        'click #share-state'           : 'onShareClicked'\r\n        'click #download-link'         : 'onDownloadAsZipClicked'\r\n        'change #uploader': 'onFilesSelected'\r\n        'change #folder-uploader': 'onDirectorySelected'\r\n\r\n        'dragstart #files' : 'onDragStart'\r\n        'dragenter #files' : 'onDragEnter'\r\n        'dragover #files'  : 'onDragEnter'\r\n        'dragleave #files' : 'onDragLeave'\r\n        'drop #files'      : 'onDrop'\r\n\r\n        'keyup input#search-box'       : 'onSearchKeyPress'\r\n\r\n    initialize: (options) ->\r\n        super options\r\n        @baseCollection = options.baseCollection\r\n        @uploadQueue = options.uploadQueue\r\n\r\n        # not empty only if a search has started\r\n        @query = options.query\r\n\r\n        # prevent contacts loading in shared area\r\n        unless app.isPublic\r\n            ModalShareView ?= require \"./modal_share\"\r\n\r\n        return this\r\n\r\n    destroy: ->\r\n        @breadcrumbsView.destroy()\r\n        @breadcrumbsView = null\r\n        @filesList.destroy()\r\n        @filesList = null\r\n\r\n        super()\r\n\r\n    getRenderData: ->\r\n        supportsDirectoryUpload: @testEnableDirectoryUpload()\r\n        model: @model.toJSON()\r\n        query: @query\r\n        zipUrl: @model.getZipURL()\r\n\r\n    afterRender: ->\r\n        @uploadButton = @$ '#button-upload-new-file'\r\n\r\n        # breadcrumb management\r\n        @renderBreadcrumb()\r\n\r\n        # files list management\r\n        @renderFileList()\r\n\r\n        # upload status management\r\n        @renderUploadStatus()\r\n\r\n        # We make a reload after the view is displayed to update\r\n        # the client without degrading UX\r\n        @refreshData()\r\n\r\n    renderBreadcrumb: ->\r\n        @$('#crumbs').empty()\r\n        @breadcrumbsView = new BreadcrumbsView collection: @model.breadcrumb, model: @model\r\n        @$(\"#crumbs\").append @breadcrumbsView.render().$el\r\n\r\n    renderFileList: ->\r\n\r\n        @filesList = new FilesView\r\n                model: @model\r\n                collection: @collection\r\n                isSearchMode: @model.get('type') is \"search\"\r\n\r\n        @filesList.render()\r\n\r\n    renderUploadStatus: ->\r\n        @uploadStatus = new UploadStatusView\r\n            collection: @uploadQueue\r\n\r\n        @uploadStatus.render().$el.appendTo @$('#upload-status-container')\r\n\r\n    spin: (state = 'small') -> @$(\"#loading-indicator\").spin state\r\n\r\n    # Refresh folder's content and manage spinner\r\n    refreshData: ->\r\n        @spin()\r\n        @baseCollection.getFolderContent @model, => @spin false\r\n\r\n    ###\r\n        Button handlers\r\n    ###\r\n\r\n    onNewFolderClicked: ->\r\n        newFolder = new File\r\n            editnew: true\r\n            name: ''\r\n            type: 'folder'\r\n            path: @model.getRepository()\r\n\r\n        @collection.add newFolder\r\n        view = @filesList.views[newFolder.cid]\r\n        view.onEditClicked()\r\n\r\n\r\n    onShareClicked: -> new ModalShareView model: @model\r\n\r\n    ###\r\n        Drag and Drop and Upload\r\n    ###\r\n    onDragStart: (e) ->\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n    onDragEnter: (e) ->\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        if not @isPublic or @canUpload\r\n            @uploadButton.addClass 'btn-cozy-contrast'\r\n            @$('#files-drop-zone').show()\r\n\r\n    onDragLeave: (e) ->\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        if not @isPublic or @canUpload\r\n            @uploadButton.removeClass 'btn-cozy-contrast'\r\n            @$('#files-drop-zone').hide()\r\n\r\n    onDrop: (e) ->\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        return false if @isPublic and not @canUpload\r\n        @onFilesSelected e\r\n        @uploadButton.removeClass 'btn-cozy-contrast'\r\n        @$('#files-drop-zone').hide()\r\n\r\n    onDirectorySelected: (e) ->\r\n        files = @$('#folder-uploader')[0].files\r\n        return unless files.length\r\n        @uploadQueue.addFolderBlobs files, @model\r\n\r\n    onFilesSelected: (e) =>\r\n        files = e.dataTransfer?.files or e.target.files\r\n        return unless files.length\r\n        @uploadQueue.addBlobs files, @model\r\n\r\n    ###\r\n        Search\r\n    ###\r\n    onSearchKeyPress: (e) ->\r\n        query = @$('input#search-box').val()\r\n\r\n        if query isnt ''\r\n            route = \"#search/#{query}\"\r\n        else\r\n            route = ''\r\n\r\n        window.app.router.navigate route, true\r\n\r\n    # Refreshes the view by changing the files list\r\n    # we basically re-do @initialize but only render file list\r\n    # to prevent the focus loss in the search field\r\n    updateSearch: (model, collection) ->\r\n        @stopListening @model\r\n        @stopListening @collection\r\n        @model = model\r\n        @collection = collection\r\n\r\n        $('#upload-buttons').hide()\r\n\r\n        # the first time the view is displayed, it doesn't exist yet\r\n        if @filesList?\r\n            @filesList.destroy()\r\n            # because destroying the view also removes the element\r\n            @$('#loading-indicator').after $ '<div id=\"files\"></div>'\r\n        @renderBreadcrumb()\r\n        @renderFileList()\r\n\r\n\r\n    ### Misc ###\r\n\r\n    testEnableDirectoryUpload: ->\r\n        input = $('<input type=\"file\">')[0]\r\n        supportsDirectoryUpload = input.directory? or\r\n                                  input.mozdirectory? or\r\n                                  input.webkitdirectory? or\r\n                                  input.msdirectory?\r\n        return supportsDirectoryUpload\r\n\r\n    # We don't want the user to download the ZIP if the folder is empty\r\n    onDownloadAsZipClicked: (event) ->\r\n        if @collection.length is 0\r\n            event.preventDefault()\r\n            Modal.error t 'modal error zip empty folder'\r\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class ModalView extends BaseView\n\n    id: \"dialog-modal\"\n    className: \"modal fade\"\n    attributes:\n        'tab-index': -1\n    template: require './templates/modal'\n    value: 0\n\n    events: ->\n        \"click #modal-dialog-no\"  : \"onNo\"\n        \"click #modal-dialog-yes\" : \"onYes\"\n\n    constructor: (@title, @msg, @yes, @no, @cb, @hideOnYes) ->\n        super()\n        @hideOnYes = true unless @hideOnYes?\n\n    initialize: ->\n        @$el.on 'hidden.bs.modal', => @close()\n\n        @render()\n        @show()\n\n    onYes: ->\n        @cb true if @cb\n        @hide()\n\n    onNo: ->\n        @cb false if @cb\n        @hide() if @hideOnYes\n\n    onShow: ->\n\n    close: ->\n        setTimeout (() => @destroy()), 500\n\n    show: ->\n        @$el.modal 'show'\n        @$el.trigger 'show'\n\n    hide: ->\n        @$el.modal 'hide'\n        @$el.trigger 'hide'\n\n    render: ->\n        @$el.append @template(title: @title, msg: @msg, yes: @yes, no: @no)\n        $(\"body\").append @$el\n        @afterRender()\n        @\n\nmodule.exports.error = (code, cb) ->\n    new ModalView t(\"modal error\"), code, t(\"modal ok\"), false, cb\n","BaseView = require '../lib/base_view'\nModal = require \"./modal\"\nclient = require \"../lib/client\"\nCozyClearanceModal = require \"cozy-clearance/modal_share_view\"\n\n# extends the cozy-clearance modal to files specifics\nmodule.exports = class ModalShareView extends CozyClearanceModal\n\n    # display inherited details on summary's click\n    events: -> _.extend super,\n        'click #inherited-share-summary a': =>\n            @$('#inherited-share-list').show()\n            @$('#inherited-share-summary').hide()\n\n    # retrieve inherited rules\n    initialize: (options) ->\n        @type = @model.get('type')\n        super\n        @summaryemails = []\n        client.get \"clearance/#{@model.id}\", (err, data) =>\n            if err\n                Modal.error 'server error occured', => @$el.modal 'hide'\n            else\n                @inherited = data.inherited\n                last = _.last @inherited\n                @forcedPublic = last.name if last?.clearance is 'public'\n\n                # actually render content\n                @refresh()\n\n    # allow rw permissions for folder, customize message depending on type\n    permissions: ->\n        if @type is 'folder'\n            'r': 'perm r folder'\n            'rw': 'perm rw folder'\n        else\n            'r': t 'perm r file'\n\n    # do not allow adding permissions for user who already have them by inheritance\n    typeaheadFilter: (item) =>\n        email = item.toString().split(';')[0]\n        super and email not in @summaryemails\n\n    # force 'public' display if forced public by inheritance\n    getRenderData: ->\n        out = super\n        out.clearance = 'public' if @forcedPublic\n        return out\n\n    # ignore click on 'public' button when forced public by inheritance\n    makePublic: ->\n        return if @forcedPublic\n        super\n\n    # support forced public by inheritance and add inherited summary\n    afterRender: () ->\n        super\n\n        if @forcedPublic\n            text = t('forced public') + @forcedPublic\n            @$('#share-public').addClass 'toggled'\n            @$('#share-private').hide().after $('<p>').text text\n        else\n            listitems = []\n            summary = []\n\n            for folder in @inherited when folder.clearance.length isnt 0\n                text = t('inherited from') + folder.name\n                listitems.push $('<li>').addClass('header').text text\n                for rule in folder.clearance\n                    summary.push rule.email\n                    listitems.push $('<li>').text rule.email\n\n            if summary.length isnt 0\n                @summaryemails = summary\n                text = t('also have access') + ' : ' + summary.join(', ') + '. '\n                summary = $('<div id=\"inherited-share-summary\">').text text\n                summary.append $('<a>').text t('details')\n                list = $('<ul id=\"inherited-share-list\">').hide()\n                list.append item for item in listitems\n                @$('#share-list').after summary, list\n\n        # if there is a writing guest\n        guestCanWrite = _.findWhere @model.get('clearance'), perm: 'rw'\n        if guestCanWrite\n            checkbox = $('<input id=\"notifs\" type=\"checkbox\">')\n            checkbox.prop 'checked', @model.get 'changeNotification'\n            text = t('change notif')\n            html = '<label class=\"notifs-label\" for=\"notifs\">'\n            label = $(html).append checkbox, text\n            @$('#share-list').after label\n\n\n    # include the changes notification in PUT request\n    saveData: ->\n        changeNotification = @$('#notifs').prop('checked') or false\n        _.extend super, changeNotification: changeNotification\n","FolderView = require './folder'\r\nclient = require '../lib/client'\r\n\r\nmodule.exports = class PublicFolderView extends FolderView\r\n\r\n    events: _.extend FolderView::events, 'click #notifications': 'onToggleNotificationClicked'\r\n\r\n\r\n    initialize: (options) ->\r\n        super options\r\n        @rootFolder = options.rootFolder\r\n\r\n    afterRender: ->\r\n        super()\r\n\r\n        # we use those class to show/hide stuff via CSS (buttons, controls, etc.)\r\n        classes = ' public'\r\n        classes += ' can-upload' if @rootFolder.canUpload\r\n        @$el.addClass classes\r\n\r\n    getRenderData: ->\r\n        _.extend super(),\r\n            isPublic: true\r\n            areNotificationsEnabled: @rootFolder.publicNotificationsEnabled\r\n            hasPublicKey: @rootFolder.publicKey.length > 0\r\n\r\n    # Enable or disable guest notifications\r\n    onToggleNotificationClicked: ->\r\n\r\n        # Notifications are only handled for the root folder\r\n        key = window.location.search\r\n        url = \"#{@model.urlRoot()}#{@rootFolder.id}/notifications#{key}\"\r\n\r\n        # toggle notifications button and persist state in database\r\n        if @rootFolder.publicNotificationsEnabled\r\n            @rootFolder.publicNotificationsEnabled = false\r\n            @$('#notifications').html '&nbsp;'\r\n            @$('#notifications').spin 'tiny'\r\n            client.put url, notificationsState: false, (err) =>\r\n                @$('#notifications').spin false\r\n                unless err?\r\n                    @$('#notifications').html t 'notifications disabled'\r\n                    @$('#notifications').removeClass 'toggled'\r\n        else\r\n            @rootFolder.publicNotificationsEnabled = true\r\n            @$('#notifications').html '&nbsp;'\r\n            @$('#notifications').spin 'tiny'\r\n            client.put url, notificationsState: true, (err) =>\r\n                @$('#notifications').spin false\r\n                unless err?\r\n                    @$('#notifications').html t 'notifications enabled'\r\n                    @$('#notifications').addClass 'toggled'","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model;\nif ( model.id == \"root\")\n{\nbuf.push(\"<li><a href=\\\"#\\\"><span class=\\\"glyphicon glyphicon-home\\\"></span></a></li>\");\n}\nelse\n{\nif ( model.type == \"search\")\n{\nbuf.push(\"<li><a\" + (jade.attr(\"href\", \"#search/\" + (model.id) + \"\", true, false)) + \">\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</a></li>\");\n}\nelse\n{\nbuf.push(\"<li><a\" + (jade.attr(\"href\", \"#folders/\" + (model.id) + \"\", true, false)) + \">\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</a></li>\");\n}\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model,attachmentUrl = locals_.attachmentUrl,downloadUrl = locals_.downloadUrl,options = locals_.options;\nbuf.push(\"<td><div class=\\\"caption-wrapper\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<a\" + (jade.attr(\"href\", \"#folders/\" + (model.id) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (t('open folder')) + \"\", true, false)) + \" class=\\\"caption btn btn-link\\\"><i class=\\\"fa fa-folder\\\"></i>\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</a>\");\n}\nelse if ( model.type == 'file')\n{\nbuf.push(\"<a\" + (jade.attr(\"href\", \"\" + (attachmentUrl) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (t('download file')) + \"\", true, false)) + \" target=\\\"_blank\\\" class=\\\"caption btn btn-link\\\"><i class=\\\"fa fa-file-o\\\"></i>\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</a>\");\n}\nbuf.push(\"<ul class=\\\"tags\\\">\");\n// iterate model.tags || []\n;(function(){\n  var $$obj = model.tags || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul><div class=\\\"operations\\\"><a\" + (jade.attr(\"title\", \"\" + (t('tooltip share')) + \"\", true, false)) + \" class=\\\"file-share\\\">\");\nif ( model.clearance == 'public')\n{\nbuf.push(\"<span class=\\\"fa fa-globe\\\"></span>\");\n}\nelse if ( model.clearance && model.clearance.length > 0)\n{\nbuf.push(\"<span class=\\\"fa fa-users\\\">\" + (jade.escape((jade_interp = model.clearance.length) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"fa fa-lock\\\"></span>\");\n}\nbuf.push(\"</a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip edit')) + \"\", true, false)) + \" class=\\\"file-edit\\\"><span class=\\\"glyphicon glyphicon-edit\\\"></span></a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip move')) + \"\", true, false)) + \" class=\\\"file-move\\\"><span class=\\\"glyphicon glyphicon-arrow-right\\\"></span></a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip delete')) + \"\", true, false)) + \" class=\\\"file-delete\\\"><span class=\\\"glyphicon glyphicon-remove-circle\\\"></span></a><a\" + (jade.attr(\"href\", \"\" + (downloadUrl) + \"\", true, false)) + \" target=\\\"_blank\\\"\" + (jade.attr(\"title\", \"\" + (t('tooltip download')) + \"\", true, false)) + \" class=\\\"file-download\\\"><span class=\\\"glyphicon glyphicon-cloud-download\\\"></span></a></div></div><!-- empty by default--></td><td class=\\\"size-column-cell\\\">\");\nif ( model.type == 'file')\n{\noptions = {base: 2}\nbuf.push(\"<span>\" + (jade.escape((jade_interp = filesize(model.size || 0, options)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"type-column-cell\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t('folder')) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t(model.class)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"date-column-cell\\\">\");\nif ( model.lastModification)\n{\nbuf.push(\"<span>\" + (jade.escape((jade_interp = moment(model.lastModification).calendar()) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model,options = locals_.options;\nbuf.push(\"<td><div class=\\\"caption-wrapper\\\"><span class=\\\"caption caption-edit btn-link\\\">\");\nif ( model.type && model.type == \"folder\")\n{\nbuf.push(\"<i class=\\\"fa fa-folder\\\"></i>\");\n}\nelse\n{\nbuf.push(\"<i class=\\\"fa fa-file-o\\\"></i>\");\n}\nbuf.push(\"<input\" + (jade.attr(\"value\", model.name, true, false)) + \" class=\\\"caption file-edit-name\\\"/></span><a class=\\\"btn btn-sm btn-cozy file-edit-save\\\">\" + (jade.escape((jade_interp = t(\"file edit save\")) == null ? '' : jade_interp)) + \"</a><a class=\\\"btn btn-sm btn-link file-edit-cancel\\\">\" + (jade.escape((jade_interp = t(\"file edit cancel\")) == null ? '' : jade_interp)) + \"</a><ul class=\\\"tags\\\">\");\n// iterate model.tags || []\n;(function(){\n  var $$obj = model.tags || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul><!-- empty!--></div><!-- empty by default--></td><td class=\\\"size-column-cell\\\">\");\nif ( model.type == 'file')\n{\noptions = {base: 2}\nbuf.push(\"<span>\" + (jade.escape((jade_interp = filesize(model.size || 0, options)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"type-column-cell\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t('folder')) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t(model.class)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"date-column-cell\\\">\");\nif ( model.lastModification)\n{\nbuf.push(\"<span>\" + (jade.escape((jade_interp = moment(model.lastModification).calendar()) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model,attachmentUrl = locals_.attachmentUrl,downloadUrl = locals_.downloadUrl,options = locals_.options;\nbuf.push(\"<td><div class=\\\"caption-wrapper\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<a\" + (jade.attr(\"href\", \"#folders/\" + (model.id) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (t('open folder')) + \"\", true, false)) + \" class=\\\"caption btn btn-link\\\"><i class=\\\"fa fa-folder\\\"></i>\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</a>\");\n}\nelse if ( model.type == 'file')\n{\nbuf.push(\"<a\" + (jade.attr(\"href\", \"\" + (attachmentUrl) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (t('download file')) + \"\", true, false)) + \" target=\\\"_blank\\\" class=\\\"caption btn btn-link\\\"><i class=\\\"fa fa-file-o\\\"></i>\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</a>\");\n}\nbuf.push(\"<ul class=\\\"tags\\\">\");\n// iterate model.tags || []\n;(function(){\n  var $$obj = model.tags || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul><div class=\\\"operations\\\"><a\" + (jade.attr(\"title\", \"\" + (t('tooltip share')) + \"\", true, false)) + \" class=\\\"file-share\\\">\");\nif ( model.clearance == 'public')\n{\nbuf.push(\"<span class=\\\"fa fa-globe\\\"></span>\");\n}\nelse if ( model.clearance && model.clearance.length > 0)\n{\nbuf.push(\"<span class=\\\"fa fa-users\\\">\" + (jade.escape((jade_interp = model.clearance.length) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"fa fa-lock\\\"></span>\");\n}\nbuf.push(\"</a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip edit')) + \"\", true, false)) + \" class=\\\"file-edit\\\"><span class=\\\"glyphicon glyphicon-edit\\\"></span></a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip move')) + \"\", true, false)) + \" class=\\\"file-move\\\"><span class=\\\"glyphicon glyphicon-arrow-right\\\"></span></a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip delete')) + \"\", true, false)) + \" class=\\\"file-delete\\\"><span class=\\\"glyphicon glyphicon-remove-circle\\\"></span></a><a\" + (jade.attr(\"href\", \"\" + (downloadUrl) + \"\", true, false)) + \" target=\\\"_blank\\\"\" + (jade.attr(\"title\", \"\" + (t('tooltip download')) + \"\", true, false)) + \" class=\\\"file-download\\\"><span class=\\\"glyphicon glyphicon-cloud-download\\\"></span></a></div></div><p class=\\\"file-path\\\">\" + (jade.escape((jade_interp = model.path) == null ? '' : jade_interp)) + \"/\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</p></td><td class=\\\"size-column-cell\\\">\");\nif ( model.type == 'file')\n{\noptions = {base: 2}\nbuf.push(\"<span>\" + (jade.escape((jade_interp = filesize(model.size || 0, options)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"type-column-cell\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t('folder')) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t(model.class)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"date-column-cell\\\">\");\nif ( model.lastModification)\n{\nbuf.push(\"<span>\" + (jade.escape((jade_interp = moment(model.lastModification).calendar()) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model;\nbuf.push(\"<table id=\\\"table-items\\\" class=\\\"table table-hover\\\"><thead><tr class=\\\"table-headers\\\"><td><span>\" + (jade.escape(null == (jade_interp = t('name')) ? \"\" : jade_interp)) + \"</span><a id=\\\"down-name\\\" class=\\\"btn glyphicon glyphicon-chevron-down unactive\\\"></a><a id=\\\"up-name\\\" class=\\\"btn glyphicon glyphicon-chevron-up unactive\\\"></a></td><td class=\\\"size-column-cell\\\"><span>\" + (jade.escape(null == (jade_interp = t('size')) ? \"\" : jade_interp)) + \"</span><a id=\\\"down-size\\\" class=\\\"glyphicon glyphicon-chevron-down btn unactive\\\"></a><a id=\\\"up-size\\\" class=\\\"unactive btn glyphicon glyphicon-chevron-up unactive\\\"></a></td><td class=\\\"type-column-cell\\\"><span>\" + (jade.escape(null == (jade_interp = t('type')) ? \"\" : jade_interp)) + \"</span><a id=\\\"down-class\\\" class=\\\"btn glyphicon glyphicon-chevron-down unactive\\\"></a><a id=\\\"up-class\\\" class=\\\"glyphicon glyphicon-chevron-up btn unactive\\\"></a></td><td class=\\\"date-column-cell\\\"><span>\" + (jade.escape(null == (jade_interp = t('date')) ? \"\" : jade_interp)) + \"</span><a id=\\\"down-lastModification\\\" class=\\\"btn glyphicon glyphicon-chevron-down unactive\\\"></a><a id=\\\"up-lastModification\\\" class=\\\"btn glyphicon glyphicon-chevron-up unactive\\\"></a></td></tr></thead><tbody id=\\\"table-items-body\\\"></tbody></table><p id=\\\"file-amount-indicator\\\" class=\\\"footer\\\"></p><p id=\\\"no-files-indicator\\\" class=\\\"footer\\\">\");\nif ( model.type == 'search')\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('no file in search')) == null ? '' : jade_interp)) + \"\");\n}\nelse\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('no file in folder')) == null ? '' : jade_interp)) + \"\");\n}\nbuf.push(\"</p>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),isPublic = locals_.isPublic,hasPublicKey = locals_.hasPublicKey,query = locals_.query,model = locals_.model,supportsDirectoryUpload = locals_.supportsDirectoryUpload,areNotificationsEnabled = locals_.areNotificationsEnabled,zipUrl = locals_.zipUrl;\nbuf.push(\"<div id=\\\"affixbar\\\" data-spy=\\\"affix\\\" data-offset-top=\\\"1\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-lg-12\\\"><div id=\\\"crumbs\\\" class=\\\"pull-left\\\"></div><p class=\\\"pull-right\\\">\");\nif ( !isPublic || hasPublicKey)\n{\nbuf.push(\"<input id=\\\"search-box\\\" type=\\\"search\\\"\" + (jade.attr(\"value\", \"\" + (query) + \"\", true, false)) + \"/>\");\n}\nif ( model.type != 'search')\n{\nbuf.push(\"<div id=\\\"upload-buttons\\\" class=\\\"pull-right\\\">\");\nif ( model.id != 'root')\n{\nbuf.push(\"<a id=\\\"share-state\\\" class=\\\"btn btn-cozy btn-cozy-contrast\\\">\");\nif ( model.clearance == 'public')\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('public')) == null ? '' : jade_interp)) + \"<span class=\\\"fa fa-globe\\\"></span>\");\n}\nelse if ( model.clearance && model.clearance.length > 0)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('shared')) == null ? '' : jade_interp)) + \"<span class=\\\"fa fa-users\\\"></span><span>\" + (jade.escape(null == (jade_interp = model.clearance.length) ? \"\" : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('private')) == null ? '' : jade_interp)) + \"<span class=\\\"fa fa-lock\\\"></span>\");\n}\nbuf.push(\"</a>&nbsp;\");\n}\nbuf.push(\"<div class=\\\"btn-group\\\"><a id=\\\"button-upload-new-file\\\"\" + (jade.attr(\"title\", t('upload button'), true, false)) + \" class=\\\"btn btn-cozy btn-cozy\\\"><input id=\\\"uploader\\\" type=\\\"file\\\" multiple=\\\"multiple\\\"/><img src=\\\"images/add-file.png\\\"/></a>\");\nif ( supportsDirectoryUpload)\n{\nbuf.push(\"<a data-toggle=\\\"dropdown\\\" class=\\\"btn btn-cozy dropdown-toggle\\\"><span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li><a id=\\\"button-upload-folder\\\"><input id=\\\"folder-uploader\\\" type=\\\"file\\\" directory=\\\"directory\\\" mozdirectory=\\\"mozdirectory\\\" webkitdirectory=\\\"webkitdirectory\\\"/><span>Upload a folder</span></a></li></ul>\");\n}\nbuf.push(\"</div>&nbsp;<a id=\\\"button-new-folder\\\"\" + (jade.attr(\"title\", t('new folder button'), true, false)) + \" class=\\\"btn btn-cozy\\\"><img src=\\\"images/add-folder.png\\\"/></a></div>\");\nif ( isPublic && hasPublicKey)\n{\nif ( areNotificationsEnabled)\n{\nbuf.push(\"<a id=\\\"notifications\\\" class=\\\"btn btn-cozy toggled\\\">\" + (jade.escape(null == (jade_interp = t('notifications enabled')) ? \"\" : jade_interp)) + \"</a>\");\n}\nelse\n{\nbuf.push(\"<a id=\\\"notifications\\\" class=\\\"btn btn-cozy\\\">\" + (jade.escape(null == (jade_interp = t('notifications disabled')) ? \"\" : jade_interp)) + \"</a>\");\n}\nbuf.push(\"&nbsp;\");\n}\nbuf.push(\"<a id=\\\"download-link\\\"\" + (jade.attr(\"href\", \"\" + (zipUrl) + \"\", true, false)) + (jade.attr(\"title\", t(\"download\"), true, false)) + \" class=\\\"btn btn-cozy-contrast\\\">\" + (jade.escape((jade_interp = t(\"download\")) == null ? '' : jade_interp)) + \"&nbsp;<i class=\\\"icon-arrow-down icon-white\\\"></i></a>\");\n}\nbuf.push(\"</p></div></div><div class=\\\"row\\\"><div id=\\\"upload-status-container\\\" class=\\\"col-lg-12\\\"></div></div></div></div><div class=\\\"container\\\"><div class=\\\"row\\\"><div id=\\\"content\\\" class=\\\"col-lg-12\\\"><div id=\\\"loading-indicator\\\">&nbsp;</div><div id=\\\"files\\\"></div><div id=\\\"files-drop-zone\\\"><div class=\\\"overlay\\\"></div><div class=\\\"vertical-container\\\"><p>\" + (jade.escape(null == (jade_interp = t('drop message')) ? \"\" : jade_interp)) + \"</p></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),title = locals_.title,msg = locals_.msg,no = locals_.no,yes = locals_.yes;\nbuf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><button type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"close\\\">×</button><h4 class=\\\"modal-title\\\">\" + (jade.escape((jade_interp = title) == null ? '' : jade_interp)) + \"</h4></div><div class=\\\"modal-body\\\"><p>\" + (jade.escape((jade_interp = msg) == null ? '' : jade_interp)) + \"</p></div><div class=\\\"modal-footer\\\">\");\nif ( no)\n{\nbuf.push(\"<button id=\\\"modal-dialog-no\\\" type=\\\"button\\\" class=\\\"btn btn-link\\\">\" + (jade.escape((jade_interp = no) == null ? '' : jade_interp)) + \"</button>\");\n}\nif ( yes)\n{\nbuf.push(\"<button id=\\\"modal-dialog-yes\\\" type=\\\"button\\\" class=\\\"btn btn-cozy\\\">\" + (jade.escape((jade_interp = yes) == null ? '' : jade_interp)) + \"</button>\");\n}\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><button type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"close\\\">×</button><h4 class=\\\"modal-title\\\">\" + (jade.escape((jade_interp = t(\"new folder caption\")) == null ? '' : jade_interp)) + \"</h4></div><div class=\\\"modal-body\\\"><fieldset><div class=\\\"form-group\\\"><label for=\\\"inputName\\\">\" + (jade.escape((jade_interp = t(\"new folder msg\")) == null ? '' : jade_interp)) + \"</label><input id=\\\"inputName\\\" type=\\\"text\\\" class=\\\"form-control\\\"/></div><div id=\\\"folder-upload-form\\\" class=\\\"form-group hide\\\"><br/><p class=\\\"text-center\\\">\" + (jade.escape(null == (jade_interp = t('upload folder separator')) ? \"\" : jade_interp)) + \"</p><label for=\\\"inputName\\\">\" + (jade.escape((jade_interp = t(\"upload folder msg\")) == null ? '' : jade_interp)) + \"</label><input id=\\\"folder-uploader\\\" type=\\\"file\\\" directory=\\\"directory\\\" mozdirectory=\\\"mozdirectory\\\" webkitdirectory=\\\"webkitdirectory\\\" class=\\\"form-control\\\"/></div></fieldset></div><div class=\\\"modal-footer\\\"><button id=\\\"modal-dialog-no\\\" type=\\\"button\\\" data-dismiss=\\\"modal\\\" class=\\\"btn btn-link\\\">\" + (jade.escape((jade_interp = t(\"new folder close\")) == null ? '' : jade_interp)) + \"</button><button id=\\\"modal-dialog-yes\\\" type=\\\"button\\\" disabled=\\\"disabled\\\" class=\\\"btn btn-cozy-contrast\\\">\" + (jade.escape((jade_interp = t(\"new folder send\")) == null ? '' : jade_interp)) + \"</button></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),value = locals_.value;\nbuf.push(\"<div class=\\\"progress active\\\"><div role=\\\"progressbar\\\"\" + (jade.attr(\"aria-valuenow\", \"\" + (value) + \"\", true, false)) + \" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\"\" + (jade.attr(\"style\", \"width: \" + (value) + \"%\", true, false)) + \" class=\\\"progress-bar progress-bar-info\\\">\" + (jade.escape((jade_interp = value) == null ? '' : jade_interp)) + \"%</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),value = locals_.value;\nbuf.push(\"<span>Upload en cours. Ne quittez pas votre navigateur.</span><div class=\\\"progress active pull-right\\\"><div\" + (jade.attr(\"style\", \"width: \" + value, true, false)) + \" class=\\\"progress-bar progress-bar-info\\\">\" + (jade.escape(null == (jade_interp = t('total progress') + value) ? \"\" : jade_interp)) + \"</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","BaseView = require '../lib/base_view'\r\nFile = require '../models/file'\r\nProgressBar = require '../widgets/progressbar'\r\n\r\nUploadedFileView = require './uploaded_file_view'\r\n\r\nmodule.exports = class UploadStatusView extends BaseView\r\n\r\n    id: \"upload-status\"\r\n    template: require './templates/upload_status'\r\n\r\n    events: ->\r\n        'click .confirm': 'resetCollection'\r\n\r\n    initialize: ->\r\n        super\r\n        @listenTo @collection, 'add', @uploadCount\r\n        @listenTo @collection, 'remove', @uploadCount\r\n        @listenTo @collection, 'reset', @render\r\n        @listenTo @collection, 'upload-progress', @progress\r\n        @listenTo @collection, 'upload-complete', @complete\r\n\r\n    getRenderData: ->\r\n        e = @collection.progress\r\n        value = if e then parseInt(100 * e.loadedBytes / e.totalBytes) + '%'\r\n        else '0 %'\r\n\r\n        return data =\r\n            value: value\r\n            collection: @collection\r\n\r\n    progress: (e) ->\r\n        @$el.removeClass 'success danger warning'\r\n        p = parseInt(100 * e.loadedBytes / e.totalBytes) + '%'\r\n        @progressbar.text(\"#{t('total progress')} : #{p}\").width(p)\r\n\r\n    complete: ->\r\n        @$('.progress').remove()\r\n        @$('.btn-success').text('Ok').addClass('confirm')\r\n\r\n        result = @collection.getResults()\r\n\r\n        @$el.addClass result.status\r\n        @$('span').text [\r\n            if result.success\r\n                t 'upload complete', smart_count: result.success\r\n            if result.existing.length\r\n                @makeExistingSentence(result.existing)\r\n\r\n            if result.error.length\r\n                @makeErrorSentence(result.error)\r\n        ].join ' '\r\n\r\n    # generate a sentence explaining existing files\r\n    makeExistingSentence: (existing) ->\r\n        parts = [existing[0].get('name')]\r\n        if existing.length > 1\r\n            parts.push t('and x files', smart_count: existing.length - 1)\r\n        parts.push t 'already exists'\r\n\r\n        return parts.join ' '\r\n\r\n    # generate a sentence explaining error files\r\n    makeErrorSentence: (errors) ->\r\n        parts = [errors[0].get('name')]\r\n        if errors.length > 1\r\n            parts.push t('and x files', smart_count: errors.length - 1)\r\n        parts.push t 'failed to upload'\r\n\r\n        return parts.join ' '\r\n\r\n    resetCollection: ->\r\n        @collection.reset()\r\n\r\n    uploadCount: (e) ->\r\n        @$el.slideDown() if @collection.length\r\n        @render() if @completed and not @collection.completed\r\n        @counter.text @collection.length\r\n        @counterDone.text @collection.loaded\r\n\r\n    afterRender: ->\r\n        @$el.removeClass 'success danger warning'\r\n        @$el.hide() unless @collection.length\r\n        @counter = @$('.counter')\r\n        @counterDone = @$('.counter-done')\r\n        @progressbar = @$('.progress-bar')\r\n        if @collection.completed then @complete()\r\n\r\n","ProgressBar = require '../widgets/progressbar'\n\nBaseView = require '../lib/base_view'\nmodule.exports = class UploadedFileView extends BaseView\n\n    className: 'upload-progress-item'\n\n    initialize: (options) ->\n        super options\n\n        @isDone = false\n        @listenTo @model, 'sync', =>\n            @isDone = true\n            @render()\n\n    template: ->\n        content = $ \"\"\"\n            <div class=\"progress-name\">\n                <span class=\"name\">#{@model.get('name')}</span>\n            </div>\n        \"\"\"\n        if @model.error\n            content.append \"\"\"\n            <span class=\"error\"> : #{@model.error}</span>\n            \"\"\"\n        else if @isDone or @model.isUploaded\n            content.append \"\"\"\n            <span class=\"success\">#{t 'upload success'}</span>\n            \"\"\"\n        else\n            content.append new ProgressBar(model: @model).render().$el\n\n        return content\n\n        destroy: ->\n            @stopListening @model\n            super()","BaseView = require '../lib/base_view'\r\n\r\nmodule.exports = class Autocomplete extends BaseView\r\n\r\n    className: 'autocomplete'\r\n    tagName: 'ul'\r\n\r\n    events: ->\r\n        'click li': 'onClick'\r\n\r\n    onInputKeyDown: (e) =>\r\n        if e.keyCode in [38, 40] # UP & DOWN\r\n            delta = e.keyCode - 39\r\n            @select @selectedIndex + delta\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n\r\n    onClick: (e) ->\r\n        e.target.classList.add 'selected'\r\n        @input.val e.target.dataset.value\r\n        event = $.Event('keydown')\r\n        event.keyCode = 13 #enter\r\n        @input.trigger event\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        $target = @$target\r\n        @unbindCancel = true\r\n        @input.focus()\r\n\r\n\r\n    initialize: ->\r\n        @tags = window.tags.map (value, idx) ->\r\n            el = document.createElement('li')\r\n            el.textContent = value\r\n            el.dataset.value = value\r\n            el.dataset.index = idx\r\n            lc = value.toLowerCase()\r\n            return {value, el, lc}\r\n\r\n    position: ->\r\n        pos = @input.offset()\r\n        pos.top += @input.height() + 2\r\n        pos.width = @input.width() + 2\r\n        @$el.appendTo($('body')).css(pos).show()\r\n\r\n\r\n    refresh: (search, existings) ->\r\n        search = @input.val()\r\n        selected = @visible?[@selectedIndex]\r\n\r\n        for tag in @tags\r\n            tag.el.classList.remove 'selected'\r\n\r\n        @visible = @tags.filter (tag) ->\r\n            tag.value not in existings and\r\n            ~tag.lc.indexOf search.toLowerCase()\r\n\r\n        if selected and selected in @visible\r\n            @selectedIndex = @visible.indexOf selected\r\n        else\r\n            @selectedIndex = -1\r\n\r\n        @$el.empty().append _.pluck @visible, 'el'\r\n\r\n    select: (index) ->\r\n\r\n        for tag in @tags\r\n            tag.el.classList.remove 'selected'\r\n\r\n        index = (index + @visible.length) % @visible.length\r\n\r\n        @selectedIndex = index\r\n        @visible[@selectedIndex].el.classList.add 'selected'\r\n        @input.val @visible[@selectedIndex].value\r\n\r\n    bind: ($target) ->\r\n        return if $target is @$target\r\n        @unbind() if @$target\r\n        @$target = $target\r\n        @input = @$target.find 'input'\r\n        @position()\r\n\r\n        @input.on 'keydown', @onInputKeyDown\r\n        @input.on 'blur', @delayedUnbind\r\n        @selectedIndex = -1\r\n\r\n    delayedUnbind: =>\r\n        @unbindCancel = false\r\n        setTimeout @unbind, 100\r\n\r\n    unbind: =>\r\n        return if @unbindCancel\r\n        @input.off 'keydown', @onInputKeyDown\r\n        @input.off 'blur', @delayedUnbind\r\n        @input.val('')\r\n        @$target = null\r\n        @$el.hide()\r\n        @$el.detach()\r\n        @selectedIndex = -1","BaseView = require '../lib/base_view'\r\n\r\nmodule.exports = class ProgressbarView extends BaseView\r\n\r\n    className: 'progressview'\r\n    template: require '../views/templates/progressbar'\r\n    value: 0\r\n\r\n    initialize: ->\r\n        @listenTo @model, 'progress', @update\r\n        @listenTo @model, 'sync', @destroy\r\n\r\n        @value = @getProgression @model.loaded, @model.total\r\n\r\n    update: (e) ->\r\n        @value = @getProgression e.loaded, e.total\r\n        @$('.progress-bar').text(@value + '%').width @value + '%'\r\n\r\n    getProgression: (loaded, total) ->\r\n        return parseInt(loaded / total * 100)\r\n\r\n    getRenderData: ->\r\n        value: @value\r\n        name: @model.get 'name'\r\n","BaseView = require '../lib/base_view'\r\nAutocomplete = require './autocomplete'\r\n\r\nmodule.exports = class TagsView extends BaseView\r\n\r\n    events: ->\r\n        'click .tag': 'tagClicked'\r\n        'click .tag .deleter': 'deleteTag'\r\n        'focus input': 'onFocus'\r\n        'keydown input': 'onKeyDown'\r\n        'keyup input': 'refreshAutocomplete'\r\n\r\n    template: -> \"\"\"\r\n        <input type=\"text\" placeholder=\"#{t('tag')}\">\r\n    \"\"\"\r\n\r\n    initialize: ->\r\n        @listenTo @model, 'change:tags', @refresh\r\n\r\n    onFocus: (e) ->\r\n        TagsView.autocomplete.bind this.$el\r\n        TagsView.autocomplete.refresh '', @tags\r\n\r\n    onKeyDown: (e) =>\r\n\r\n        val = @input.val()\r\n\r\n        if val is '' and e.keyCode is 8 #BACKSPACE\r\n            @tags = @tags[0..-2]\r\n            @model.save tags: @tags\r\n            @refresh()\r\n            TagsView.autocomplete.refresh('', @tags)\r\n            TagsView.autocomplete.position()\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            return\r\n\r\n        # COMMA, SPACE, TAB, ENTER\r\n        if val and e.keyCode in [188, 32, 9, 13]\r\n            @tags.push val unless val in @tags\r\n            @model.save tags: @tags\r\n            @input.val ''\r\n            @refresh()\r\n            TagsView.autocomplete.refresh('', @tags)\r\n            TagsView.autocomplete.position()\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            return\r\n\r\n        if e.keyCode in [188, 32, 9, 13]\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            return\r\n\r\n        #UP, DOWN\r\n        if e.keyCode in [40, 38]\r\n            return true\r\n\r\n        if val and e.keyCode isnt 8\r\n            @refreshAutocomplete()\r\n            return true\r\n\r\n    refreshAutocomplete: (e) =>\r\n        return if e?.keyCode in [40, 38, 8]\r\n        TagsView.autocomplete.refresh @input.val(), @tags\r\n\r\n    deleteTag: (e) =>\r\n        tag = e.target.parentNode.dataset.value\r\n        @model.save\r\n            tags: @tags = _.without @tags, tag\r\n\r\n    afterRender: ->\r\n        @refresh()\r\n        @tags = @model.get('tags')\r\n        @input = @$('input')\r\n\r\n    refresh: =>\r\n        @$('.tag').remove()\r\n        html = (\"\"\"\r\n                <li class=\"tag\" data-value=\"#{tag}\">\r\n                    #{tag}\r\n                    <span class=\"deleter\"> &times; </span>\r\n                </li>\r\n            \"\"\" for tag in @model.get('tags') or []).join ''\r\n        @$el.prepend html\r\n\r\nTagsView.autocomplete = new Autocomplete(id: 'tagsAutocomplete')\r\nTagsView.autocomplete.render()"]}